"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[233],{2233:(At,b,c)=>{c.r(b),c.d(b,{HomeModule:()=>xt});var d=c(6814),l=c(5476),t=c(4769),p=c(5897);let x=(()=>{class i{constructor(o){this.homeService=o,this.homeService.changeTitle("SERVICIOS\xa0ESPECIALIZADOS")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(p.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-main"]],decls:26,vars:0,consts:[[1,"main","container"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-center"],["src","./assets/images/servicios/laboratorio.jpg","alt","lab"],["routerLink","/home/laboratory",1,"btn","mt-3"],["src","./assets/valves/Valves.png","alt","lab"],["routerLink","/home/valves",1,"btn","mt-3"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),t._uU(6,"Laboratorio Metrolog\xedco de Calibraci\xf3n"),t.qZA(),t.TgZ(7,"h5"),t._uU(8,"Caracter\xedsticas"),t.qZA(),t.TgZ(9,"p"),t._uU(10," Calibracion con trazabilidad metrol\xf3gica (en sitio), en presi\xf3n y temperatura para instrumentos industriales "),t.qZA(),t._UZ(11,"img",5),t.TgZ(12,"button",6),t._uU(13,"ver"),t.qZA()()()(),t.TgZ(14,"div",2)(15,"div",3)(16,"div",4)(17,"h4"),t._uU(18,"Especialidad Valvulas"),t.qZA(),t.TgZ(19,"h5"),t._uU(20,"Caracter\xedsticas"),t.qZA(),t.TgZ(21,"p"),t._uU(22," Mantenimiento y pruebas a v\xe1lvulas manuales, de control, de seguridad y alivio, bajo est\xe1ndares internacionales "),t.qZA(),t._UZ(23,"img",7),t.TgZ(24,"button",8),t._uU(25,"ver"),t.qZA()()()()()())},dependencies:[l.rH],styles:[".main[_ngcontent-%COMP%]{padding-top:6rem}.main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:70%;padding-top:1rem}.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}@media (max-width: 992px){.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return i})();var _=c(4567);function A(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"a",5),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.goProfile())}),t._uU(1,"Perfil"),t.qZA()}}function T(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"li")(1,"a",5),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.goAdmin())}),t._uU(2,"Go Admin"),t.qZA()()}}let P=(()=>{class i{constructor(o,n){this.authService=o,this.router=n,this.svgColor="#f74149",this.showOptions=!1}ngOnInit(){this.showOptions=this.authService.adminUser()}onLogout(){this.authService.logout(),this.router.navigateByUrl("/auth")}goAdmin(){this.router.navigateByUrl("/dashboard")}goProfile(){this.router.navigateByUrl("/home/profile")}goHome(){this.router.navigateByUrl("/home/main")}goValves(){this.router.navigateByUrl("/home/valves")}goLaboratory(){this.router.navigateByUrl("/home/laboratory")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(_.J),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-profile-dropdown"]],inputs:{svgColor:"svgColor"},decls:19,vars:3,consts:[[1,"dropdown"],["aria-expanded","false","data-bs-toggle","dropdown","id","userId","xmlns","http://www.w3.org/2000/svg","height","50","viewBox","0 -960 960 960","width","50","xmlns","http://www.w3.org/2000/svg",1,"dropdown-toggle","c-pointer"],["d","M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"],["aria-labelledby","userId",1,"dropdown-menu","p-0"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[4,"ngIf"],[1,"logout"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2),t.qZA(),t.kcU(),t.TgZ(3,"ul",3)(4,"li"),t.YNc(5,A,2,0,"a",4),t.qZA(),t.TgZ(6,"li")(7,"a",5),t.NdJ("click",function(){return e.goHome()}),t._uU(8,"Inicio"),t.qZA()(),t.TgZ(9,"li")(10,"a",5),t.NdJ("click",function(){return e.goValves()}),t._uU(11,"Valvulas"),t.qZA()(),t.TgZ(12,"li")(13,"a",5),t.NdJ("click",function(){return e.goLaboratory()}),t._uU(14,"Laboratorio"),t.qZA()(),t.YNc(15,T,3,0,"li",6),t.TgZ(16,"li",7)(17,"a",5),t.NdJ("click",function(){return e.onLogout()}),t._uU(18,"Cerrar Sesi\xf3n"),t.qZA()()()()),2&n&&(t.xp6(1),t.uIk("fill",e.svgColor),t.xp6(4),t.Q6J("ngIf",!e.showOptions),t.xp6(10),t.Q6J("ngIf",e.showOptions))},dependencies:[d.O5],styles:[".dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem;width:250px}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f74149}.dropdown-menu[_ngcontent-%COMP%]{padding:2rem}.logout[_ngcontent-%COMP%]{background-color:#d3555b}.logout[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important}"]})}return i})();var w=c(4912),O=c(1777);let M=(()=>{class i{constructor(o,n,e){this.homeService=o,this.cdr=n,this.router=e,this.currentColor="white",this.otherColor="#f74149",this.title="Pendiente"}ngOnInit(){this.homeService.currentTitle.subscribe(o=>{this.title=o,this.cdr.detectChanges()})}goMain(){this.router.navigate(["/home/main"])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(p.Y),t.Y36(t.sBO),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-home-layout"]],decls:18,vars:6,consts:[[1,"home-main"],[1,"home-header","d-flex"],[1,"home-header__logo","d-flex","align-items-center","justify-content-center","flex-column"],[1,"back"],[3,"mainColor","secondaryColor"],["src","./assets/images/logo/LOGO-ANIMACION.gif","alt","CDI",1,"c-pointer",3,"click"],[1,"pt-4","d-md-none"],[1,"profile","d-md-none"],[3,"svgColor"],[1,"home-header__navigation","d-flex","align-items-center","justify-content-center"],[1,"p-1"],[1,"profile-lg"],[1,"router-outlet-content","pb-5"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-back",4),t.qZA(),t.TgZ(5,"img",5),t.NdJ("click",function(){return e.goMain()}),t.qZA(),t.TgZ(6,"h5",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"app-profile-dropdown",8),t.qZA()(),t.TgZ(10,"div",9)(11,"h5",10),t._uU(12),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"app-profile-dropdown",8),t.qZA()()()(),t.TgZ(15,"div",12),t._UZ(16,"router-outlet"),t.qZA(),t._UZ(17,"app-footer")),2&n&&(t.xp6(4),t.Q6J("mainColor",e.currentColor)("secondaryColor",e.otherColor),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("svgColor",e.currentColor),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("svgColor",e.currentColor))},dependencies:[l.lC,P,w.A,O.c],styles:[".home-header[_ngcontent-%COMP%]{color:#fff;height:6rem;left:0;position:fixed;top:0;width:100%;z-index:1000}@media (max-width: 768px){.home-header[_ngcontent-%COMP%]{height:10rem}}.home-header__logo[_ngcontent-%COMP%]{background-color:#34495e;height:100%;width:30%;position:relative}.home-header__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}@media (max-width: 768px){.home-header__logo[_ngcontent-%COMP%]{width:100%}}.home-header__navigation[_ngcontent-%COMP%]{background-color:#f74149;height:100%;width:70%;position:relative}@media (max-width: 768px){.home-header__navigation[_ngcontent-%COMP%]{width:100%;display:none!important}.home-header__navigation[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:12px}}.profile-lg[_ngcontent-%COMP%]{position:absolute;right:5px}.profile[_ngcontent-%COMP%]{position:absolute;right:5px;top:17px}.back[_ngcontent-%COMP%]{position:absolute;left:10px;top:17px}.router-outlet-content[_ngcontent-%COMP%]{padding-top:8rem;background-image:url(BGLogin.a7654520c0a5b9a7.jpg);background-size:cover;min-height:calc(100vh - 66px);width:100%}"]})}return i})();var r=c(95),N=c(3519),u=c.n(N);function q(i,s){if(1&i&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Alcance mantenimiento:"),t.qZA(),t._uU(5),t.TgZ(6,"span",20),t._uU(7,"Notas:"),t.qZA(),t._uU(8),t.qZA()(),t.TgZ(9,"div",12),t._UZ(10,"input",21),t.qZA()()),2&i){const o=s.$implicit;let e,a;t.Q6J("formGroupName",s.index),t.xp6(5),t.hij(" ",null==(e=o.get("scope"))?null:e.value," "),t.xp6(3),t.hij(" ",null==(a=o.get("notes"))?null:a.value," ")}}let C=(()=>{class i{constructor(o,n,e,a,m){this.route=o,this.homeService=n,this.authService=e,this.formBuilder=a,this.router=m,this.attemptedSubmit=!1,this.type="",this.group="",this.code="",this.title="",this.control="",this.isDisabled=!0,this.user=this.authService.currentUser(),this.mainForm=this.formBuilder.group({solutionsArray:this.formBuilder.array([])})}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group,this.type=o.type,this.code=o.code,this.control=o.control,this.loadSolutions(this.group,this.type,this.code,this.control),this.homeService.changeTitle("FORMULARIO PARA SOLICITUD DE COTIZAC\xcdON")})}ngOnDestroy(){this.solutions$&&this.solutions$.unsubscribe()}get solutionsArray(){return this.mainForm.get("solutionsArray")}loadSolutions(o,n,e,a){this.solutions$=this.homeService.getSolutionsByType(o,n,e,a).subscribe({next:m=>{this.buildFormArray(m)},error:m=>console.error("Error loading solutions:",m)})}buildFormArray(o){const n=this.mainForm.get("solutionsArray");n.clear(),o.forEach(e=>{n.push(this.formBuilder.group({_id:[e._id],group:[e.group],type:[e.type],code:[e.code],scope:[e.scope],notes:[e.notes],totalHours:[e.totalHours],unitValue:[e.unitValue],inputValue:[0,r.kI.min(0)]}))})}submitForm(){if(this.mainForm.markAllAsTouched(),this.attemptedSubmit=!0,!this.mainForm.valid)return this.scrollToFormStart(),void console.log("Form is not valid");const o=this.getValidSolutions();o.length?this.createQuotation(o):this.showNoServicesSelectedError()}scrollToFormStart(){document.getElementById("formStart")?.scrollIntoView({behavior:"smooth",block:"start"})}getValidSolutions(){return this.mainForm.value.solutionsArray.filter(o=>o.inputValue>0).map(o=>({_id:o._id,inputValue:o.inputValue}))}showNoServicesSelectedError(){u().fire("No selecciono servicios","Por lo menos una cantidad debe ser superior a cero","error")}createQuotation(o){this.homeService.createQuotation({nit:this.user?.nit,legalName:this.user?.companyName,phoneNumber:this.user?.phoneNumber,email:this.user?.email,type:"valves",services:o}).subscribe({next:e=>{this.showQuotationSuccessMessage(),this.resetSolutionsArray(),this.attemptedSubmit=!1},error:e=>{this.showQuotationErrorMessage()}})}showQuotationSuccessMessage(){u().fire({title:"\xa1\xc9xito!",text:"Cotizaci\xf3n creada con \xe9xito.",icon:"success",confirmButtonText:"Ok"})}showQuotationErrorMessage(){u().fire({title:"Error",text:"No se pudo crear la cotizaci\xf3n. Por favor, intenta de nuevo.",icon:"error",confirmButtonText:"Entendido"})}resetSolutionsArray(){this.mainForm.get("solutionsArray").controls.forEach(n=>{n.patchValue({inputValue:0})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.gz),t.Y36(p.Y),t.Y36(_.J),t.Y36(r.qu),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],decls:40,vars:6,consts:[["id","formStart",1,"container","home-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","text-center","p-3"],[1,"text-white"],[1,"col-12","mb-3"],[1,"col-12","col-md-3","pb-1"],[1,"fake-input"],["formArrayName","solutionsArray"],[1,"d-none","d-md-block"],[1,"row","header-form","text-white","py-2","mb-2"],[1,"col-md-10","text-center"],[1,"col-md-2","text-center"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","pb-4"],[1,"col-12"],["type","submit",1,"btn","float-end","fw-bold","btn-danger"],[1,"row","mb-2",3,"formGroupName"],[1,"col-md-10"],[1,"text-own-justify","text-white"],[1,"fw-bold"],["type","number","formControlName","inputValue","min","0","placeholder","Ingrese valor",1,"form-control","custom-input-internal"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5,"SUS DATOS"),t.qZA()(),t.TgZ(6,"div",5)(7,"div",2)(8,"div",6)(9,"label",4),t._uU(10,"NIT:"),t.qZA(),t.TgZ(11,"div",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",6)(14,"label",4),t._uU(15,"Nombre de la compa\xf1\xeda:"),t.qZA(),t.TgZ(16,"div",7),t._uU(17),t.qZA()(),t.TgZ(18,"div",6)(19,"label",4),t._uU(20,"Tel\xe9fono de contacto:"),t.qZA(),t.TgZ(21,"div",7),t._uU(22),t.qZA()(),t.TgZ(23,"div",6)(24,"label",4),t._uU(25,"Email:"),t.qZA(),t.TgZ(26,"div",7),t._uU(27),t.qZA()()()()(),t.TgZ(28,"div",8)(29,"div",9)(30,"div",10)(31,"div",11),t._uU(32,"Alcance"),t.qZA(),t.TgZ(33,"div",12),t._uU(34,"Cantidad"),t.qZA()()(),t.YNc(35,q,11,3,"div",13),t.qZA(),t.TgZ(36,"div",14)(37,"div",15)(38,"button",16),t._uU(39," Enviar "),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.mainForm),t.xp6(11),t.Oqu(null==e.user?null:e.user.nit),t.xp6(5),t.Oqu(null==e.user?null:e.user.companyName),t.xp6(5),t.Oqu(null==e.user?null:e.user.phoneNumber),t.xp6(5),t.Oqu(null==e.user?null:e.user.email),t.xp6(8),t.Q6J("ngForOf",e.solutionsArray.controls))},dependencies:[d.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,r.x0,r.CE],styles:[".home-form[_ngcontent-%COMP%]{padding-top:3rem}.home-form[_ngcontent-%COMP%]   .header-form[_ngcontent-%COMP%]{background-color:#f74149}.text-own-justify[_ngcontent-%COMP%]{text-align:justify}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return i})(),U=(()=>{class i{constructor(o,n){this.router=o,this.homeService=n,this.types=[{type:"V\xe1lvulas de Control",title:"MANTENIMIENTO DE VALVULAS DE CONTROL",image:"./assets/valves/1.jpg"},{type:"V\xe1lvulas Manuales",title:"MANTENIMIENTO DE VALVULAS MANUALES",image:"./assets/valves/2.jpg"},{type:"V\xe1lvulas de seguridad - Alivio",title:"MANTENIMIENTO DE VALVULAS DE SEGURIDAD / ALIVIO",image:"./assets/valves/3.jpg"}],this.homeService.changeTitle("SERVICIOS\xa0ESPECIALIZADOS")}goForm(o,n){this.router.navigate(n?[`/home/control/Valves/${o}/${n}`]:[`/home/codes/Valves/${o}`])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(p.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-valves"]],decls:35,vars:3,consts:[[1,"valves","container","pt-5"],[1,"row"],[1,"col-md-12","col-sm-12"],[1,"card","mb-2"],[1,"p-1","text-center"],[1,"card-body","text-center"],[1,"control","me-3"],[1,"pb-2"],["src","./assets/images/instrumentacion/CV4.png","alt","Valvulas de control",1,""],[1,"btn","mt-3",3,"click"],[1,"control"],["src","./assets/images/instrumentacion/MOV-3.png","alt","Valvulas de control",1,""],[1,"col-md-6","col-sm-12"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/instrumentacion/HV-1.png","alt","Valvulas manuales",1,"me-3","image-section"],["src","./assets/images/instrumentacion/PSV-3.jpeg","alt","Valvulas de seguridad y alivio",1,"me-3","image-section"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"h6",7),t._uU(9,"Actuador Neum\xe1tico"),t.qZA(),t._UZ(10,"img",8),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.goForm(e.types[0].type,"Actuador Neum\xe1tico")}),t._uU(12," ver "),t.qZA()(),t.TgZ(13,"div",10)(14,"h6",7),t._uU(15,"Actuador\xa0El\xe9ctrico"),t.qZA(),t._UZ(16,"img",11),t.TgZ(17,"button",9),t.NdJ("click",function(){return e.goForm(e.types[0].type,"Actuador\xa0El\xe9ctrico")}),t._uU(18," ver "),t.qZA()()()()(),t.TgZ(19,"div",12)(20,"div",3)(21,"div",13)(22,"h4",7),t._uU(23),t.qZA(),t._UZ(24,"img",14),t.TgZ(25,"button",9),t.NdJ("click",function(){return e.goForm(e.types[1].type)}),t._uU(26,"ver"),t.qZA()()()(),t.TgZ(27,"div",12)(28,"div",3)(29,"div",13)(30,"h4",7),t._uU(31),t.qZA(),t._UZ(32,"img",15),t.TgZ(33,"button",9),t.NdJ("click",function(){return e.goForm("Valvulas de seguridad")}),t._uU(34," ver "),t.qZA()()()()()()),2&n&&(t.xp6(5),t.Oqu(e.types[0].type),t.xp6(18),t.Oqu(e.types[1].type),t.xp6(8),t.Oqu(e.types[2].type))},styles:[".valves[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.valves[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{height:50%;flex-direction:column}}.valves[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:250px;margin-bottom:1rem;padding-bottom:1rem}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{height:auto;flex-direction:column;margin-bottom:0;padding-bottom:0}}.valves[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;width:250px}.valves[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px;width:250px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}.valves[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{align-items:center}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:1rem!important}}.valves[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff;width:150px;margin-bottom:1rem}.image-section[_ngcontent-%COMP%]{height:200px!important;width:250px!important}"]})}return i})();var F=c(9989);function S(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const a=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.goForm(a))}),t.TgZ(1,"h4"),t._uU(2),t.qZA()()}if(2&i){const o=s.$implicit;t.xp6(2),t.Oqu(o)}}let y=(()=>{class i{constructor(o,n,e){this.router=o,this.route=n,this.homeService=e,this.codes=[],this.type="",this.group="",this.control="",this.solutionsService=(0,t.f3M)(F.h)}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group,this.type=o.type,this.control=o.control,this.getCodes(this.type,this.control);let n=`${this.type}`;this.control&&(n+=` : ${this.control}`),this.homeService.changeTitle(`${n}`)})}getCodes(o,n){this.solutionsService.getCodesByGroupsAndTypes(this.group,o,n).then(e=>{const a=e.sort((m,g)=>(m.includes("-")?parseInt(m.split("-")[1]):parseInt(m))-(g.includes("-")?parseInt(g.split("-")[1]):parseInt(g)));this.codes=a}).catch(e=>{console.error(e)})}goForm(o){const n=this.getTitle(o);this.router.navigate(this.control?["home/controlform/",this.group,this.type,o,n,this.control]:["home/form/",this.group,this.type,o,n])}getTitle(o){const n={"150-300":"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 150-300",600:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 600",900:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 900",1500:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 1500"};return"Valves"===this.group&&"V\xe1lvulas Manuales"===this.type&&n[o]?n[o]:""}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(p.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-codes-page"]],decls:5,vars:1,consts:[[1,"valves","container","pt-5"],[1,"row"],[1,"text-center","mb-4","fw-bold"],["class","code card card-body m-3 d-flex align-items-center justify-content-center",3,"click",4,"ngFor","ngForOf"],[1,"code","card","card-body","m-3","d-flex","align-items-center","justify-content-center",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Seleccione su preferencia"),t.qZA(),t.YNc(4,S,3,1,"div",3),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",e.codes))},dependencies:[d.sg],styles:[".valves[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}.valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{background:#f74149;color:#fff;cursor:pointer;width:40%}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{width:100%}}"]})}return i})();const E=[{title:"Transmisor de Presion",img:"./assets/images/instrumentacion/t-presion.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo generaci\xf3n de la magnitud.","Calibraci\xf3n bajo m\xe9todo normalizado.","Analisis de tendencia de datos de calibracion.","Emision de certificado de calibraci\xf3n.","Entrega del instrumentos y resultados."]}},{title:"Indicador de Presion",img:"./assets/images/instrumentacion/i-presion.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo generaci\xf3n de la magnitud.","Calibraci\xf3n bajo m\xe9todo normalizado.","Analisis de tendencia de datos de calibracion.","Emision de certificado de calibraci\xf3n.","Entrega del instrumentos y resultados."]}},{title:"Switche de Presion",img:"./assets/images/instrumentacion/sw-presion.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo magnitud de presi\xf3n y verificaci\xf3n de contacto NA-NC.","Verificacion y ajustes del set point y banda muerta.","Emision de reporte de resultados.","Entrega del instrumentos y resultados."]}}],I=[{title:"Transmisor de Temperatura",img:"./assets/images/instrumentacion/t-temperatura.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo generaci\xf3n de la magnitud.","Calibraci\xf3n bajo m\xe9todo normalizado.","Analisis de tendencia de datos de calibracion.","Emision de certificado de calibraci\xf3n.","Entrega del instrumentos y resultados."]}},{title:"Indicador de Temperatura",img:"./assets/images/instrumentacion/i-temperatura.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo generaci\xf3n de la magnitud.","Calibraci\xf3n bajo m\xe9todo normalizado.","Analisis de tendencia de datos de calibracion.","Emision de certificado de calibraci\xf3n.","Entrega del instrumentos y resultados."]}},{title:"Switche de Temperatura",img:"./assets/images/instrumentacion/sw-temperatura.jpg",properties:{prop:["Recepci\xf3n del instrumento.","Limpieza del instrumento.","Prueba funcional bajo magnitud de presi\xf3n y verificaci\xf3n de contacto NA-NC","Verificacion y ajustes del set point y banda muerta.","Emision de reporte de resultados.","Entrega del instrumentos y resultados."]}}];let k=(()=>{class i{constructor(o,n){this.router=o,this.homeService=n,this.homeService.changeTitle("SERVICIOS\xa0ESPECIALIZADOS")}goForm(o){this.router.navigate(["/home/laboratory-section"],{queryParams:{type:o,instruments:JSON.stringify("presion"===o?E:I)}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(p.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-laboratory"]],decls:33,vars:0,consts:[[1,"laboratory","container","pt-5"],[1,"row"],[1,"text-center","text-white","p-3"],[1,"pb-2"],[1,"fw-bold"],[1,"col-md-6","col-sm-12"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/servicios/laboratorio.jpg","alt","lab"],["routerLink","/home/laboratory",1,"btn","mt-3",3,"click"],["src","./assets/images/servicios/Temperatura-4.jpg","alt","lab"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Laboratorio Metrolog\xedco de Calibraci\xf3n"),t.qZA(),t.TgZ(5,"h4"),t._uU(6,"Caracteristicas"),t.qZA(),t.TgZ(7,"p")(8,"span",4),t._uU(9,"Clasificaci\xf3n: "),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Laboratorio Nivel 2 -Tipo 2 (Clase A)."),t.qZA()(),t.TgZ(12,"p")(13,"span",4),t._uU(14,"Magnitud: "),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Presi\xf3n y Temperatura."),t.qZA()()(),t.TgZ(17,"div",5)(18,"div",6)(19,"div",7)(20,"h4"),t._uU(21,"Presion"),t.qZA(),t._UZ(22,"img",8),t.TgZ(23,"button",9),t.NdJ("click",function(){return e.goForm("presion")}),t._uU(24," Ver "),t.qZA()()()(),t.TgZ(25,"div",5)(26,"div",6)(27,"div",7)(28,"h4"),t._uU(29,"Temperatura"),t.qZA(),t._UZ(30,"img",10),t.TgZ(31,"button",9),t.NdJ("click",function(){return e.goForm("temperatura")}),t._uU(32," Ver "),t.qZA()()()()()())},dependencies:[l.rH],styles:[".laboratory[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}@media (max-width: 992px){.laboratory[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}.laboratory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return i})();function L(i,s){if(1&i&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Alcance del servicio:"),t.qZA(),t._uU(5),t.qZA()(),t.TgZ(6,"div",12),t._UZ(7,"input",21),t.qZA()()),2&i){const o=s.$implicit;let e;t.Q6J("formGroupName",s.index),t.xp6(5),t.hij(" ",null==(e=o.get("scope"))?null:e.value," ")}}let V=(()=>{class i{constructor(o,n,e,a,m){this.route=o,this.homeService=n,this.formBuilder=e,this.authService=a,this.router=m,this.attemptedSubmit=!1,this.type="",this.title="",this.mainForm=this.formBuilder.group({solutionsArray:this.formBuilder.array([])}),this.user=this.authService.currentUser()}ngOnInit(){this.route.params.subscribe(o=>{this.type=o.type,this.loadRegisters(this.type),this.homeService.changeTitle("FORMULARIO PARA SOLICITUD DE COTIZAC\xcdON")})}ngOnDestroy(){this.registersLab$&&this.registersLab$.unsubscribe()}get nitControl(){return this.mainForm.get("nit")}get companyNameControl(){return this.mainForm.get("companyName")}get contactPhoneControl(){return this.mainForm.get("contactPhone")}get emailControl(){return this.mainForm.get("email")}get solutionsArray(){return this.mainForm.get("solutionsArray")}loadRegisters(o){this.registersLab$=this.homeService.getLabRegistersByType(o).subscribe({next:n=>{this.buildFormArray(n)},error:n=>console.error("Error loading registers:",n)})}buildFormArray(o){const n=this.mainForm.get("solutionsArray");n.clear(),o.forEach(e=>{n.push(this.formBuilder.group({_id:[e._id],type:[e.type],scope:[e.scope],totalHours:[e.totalHours],unitValue:[e.unitValue],inputValue:[0,r.kI.min(0)]}))})}submitForm(){if(this.mainForm.markAllAsTouched(),this.attemptedSubmit=!0,!this.mainForm.valid)return this.scrollToFormStart(),void console.log("Form is not valid");const o=this.getValidSolutions();o.length?this.createQuotation(o):this.showNoServicesSelectedError()}scrollToFormStart(){document.getElementById("formStart")?.scrollIntoView({behavior:"smooth",block:"start"})}getValidSolutions(){return this.mainForm.value.solutionsArray.filter(o=>o.inputValue>0).map(o=>({_id:o._id,inputValue:o.inputValue}))}showNoServicesSelectedError(){u().fire("No selecciono servicios","Por lo menos una cantidad debe ser superior a cero","error")}createQuotation(o){this.homeService.createQuotation({nit:this.user?.nit,legalName:this.user?.companyName,phoneNumber:this.user?.phoneNumber,email:this.user?.email,type:"laboratory",services:o}).subscribe({next:e=>{this.showQuotationSuccessMessage(),this.resetSolutionsArray(),this.attemptedSubmit=!1},error:e=>{this.showQuotationErrorMessage()}})}showDataPolicyWarning(){u().fire({title:"Aviso",text:"Debes aceptar la pol\xedtica de tratamiento de datos para continuar.",icon:"warning",confirmButtonText:"Entendido"})}showQuotationSuccessMessage(){u().fire({title:"\xa1\xc9xito!",text:"Cotizaci\xf3n creada con \xe9xito.",icon:"success",confirmButtonText:"Ok"})}showQuotationErrorMessage(){u().fire({title:"Error",text:"No se pudo crear la cotizaci\xf3n. Por favor, intenta de nuevo.",icon:"error",confirmButtonText:"Entendido"})}resetSolutionsArray(){this.mainForm.get("solutionsArray").controls.forEach(n=>{n.patchValue({inputValue:0})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.gz),t.Y36(p.Y),t.Y36(r.qu),t.Y36(_.J),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-form-laboratory"]],decls:40,vars:6,consts:[["id","formStart",1,"container","home-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","text-center","text-white","p-3"],[1,"col-12","mb-3"],[1,"col-12","col-md-3","pb-1"],[1,"text-white"],[1,"fake-input"],["formArrayName","solutionsArray"],[1,"d-none","d-md-block"],[1,"row","header-form","text-white","py-2","mb-2"],[1,"col-md-10","text-center"],[1,"col-md-2","text-center"],["class","row mb-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","pb-4"],[1,"col-12"],["type","submit",1,"btn","btn-danger","float-end","fw-bold"],[1,"row","mb-3",3,"formGroupName"],[1,"col-md-10","text-white"],[1,"text-own-justify"],[1,"fw-bold"],["type","number","formControlName","inputValue","min","0","placeholder","Ingrese valor",1,"form-control","custom-input-internal"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"SUS DATOS"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",2)(8,"div",5)(9,"label",6),t._uU(10,"NIT:"),t.qZA(),t.TgZ(11,"div",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",5)(14,"label",6),t._uU(15,"Nombre de la compa\xf1\xeda:"),t.qZA(),t.TgZ(16,"div",7),t._uU(17),t.qZA()(),t.TgZ(18,"div",5)(19,"label",6),t._uU(20,"Tel\xe9fono de contacto:"),t.qZA(),t.TgZ(21,"div",7),t._uU(22),t.qZA()(),t.TgZ(23,"div",5)(24,"label",6),t._uU(25,"Email:"),t.qZA(),t.TgZ(26,"div",7),t._uU(27),t.qZA()()()()(),t.TgZ(28,"div",8)(29,"div",9)(30,"div",10)(31,"div",11),t._uU(32,"Alcance"),t.qZA(),t.TgZ(33,"div",12),t._uU(34,"Cantidad"),t.qZA()()(),t.YNc(35,L,8,2,"div",13),t.qZA(),t.TgZ(36,"div",14)(37,"div",15)(38,"button",16),t._uU(39," Enviar "),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.mainForm),t.xp6(11),t.Oqu(null==e.user?null:e.user.nit),t.xp6(5),t.Oqu(null==e.user?null:e.user.companyName),t.xp6(5),t.Oqu(null==e.user?null:e.user.phoneNumber),t.xp6(5),t.Oqu(null==e.user?null:e.user.email),t.xp6(8),t.Q6J("ngForOf",e.solutionsArray.controls))},dependencies:[d.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,r.x0,r.CE],styles:[".home-form[_ngcontent-%COMP%]{padding-top:5rem}.home-form[_ngcontent-%COMP%]   .header-form[_ngcontent-%COMP%]{background-color:#f74149}.text-own-justify[_ngcontent-%COMP%]{text-align:justify}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return i})();const J=function(i){return{grow:i}};function Y(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"h6",16),t._uU(4),t.qZA(),t._UZ(5,"img",17),t.TgZ(6,"button",11),t.NdJ("click",function(){const a=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.goInstrument(a))}),t._uU(7," Ver... "),t.qZA()()()()}if(2&i){const o=s.$implicit;t.xp6(4),t.Oqu(o.title),t.xp6(1),t.Q6J("src",o.img,t.LSH)("ngClass",t.VKq(3,J,"Switche de Temperatura"==o.title))}}let j=(()=>{class i{constructor(o,n,e){this.route=o,this.router=n,this.homeService=e,this.type="",this.kind="",this.method="",this.image="",this.instruments=[]}ngOnInit(){this.route.queryParams.subscribe(o=>{this.type=o.type,this.kind="presion"===this.type?"Presi\xf3n":"Temperatura",this.image="presion"===this.type?"./assets/images/instrumentacion/presion-5.jpg":"./assets/images/instrumentacion/temperatura-10.jpg",this.method="presion"===this.type?"DKD-R-6-1 (Edici\xf3n 03/2014)":"Nordtest VVS-103",o.instruments&&(this.instruments=JSON.parse(o.instruments)),this.homeService.changeTitle("SERVICIOS\xa0ESPECIALIZADOS")})}goInstrument(o){this.router.navigate(["/home/instrument"],{queryParams:{type:this.type,item:JSON.stringify(o)}})}goForm(){this.router.navigate([`/home/laboratory/${this.type}`])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(p.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-lab-commercial"]],decls:32,vars:5,consts:[[1,"container","pt-5"],[1,"text-center","text-white","fw-bold","p-3","mb-5"],[1,"main-lab"],[1,"row"],[1,"col-12","col-md-6","text-center"],[3,"src","alt"],[1,"col-12","col-md-6","text-white"],[1,"text-left","pt-4"],[1,"text-center","fw-bold"],[1,"fw-bold"],[1,"col-12","text-center"],["routerLink","/home/laboratory",1,"btn","mt-3","btn-danger",3,"click"],["class","col-sm-12 col-md-4 lab-commercial",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-4","lab-commercial"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],[1,"p-2"],["alt","lab",3,"src","ngClass"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2," Laboratorio Metrolog\xedco de Calibraci\xf3n "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"img",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"h3",8),t._uU(10,"Caracter\xedsticas"),t.qZA(),t.TgZ(11,"p")(12,"span",9),t._uU(13,"Magnitud:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"span",9),t._uU(17,"Metodo Utilizado:"),t.qZA(),t._uU(18),t.qZA(),t.TgZ(19,"p")(20,"span",9),t._uU(21,"Metododologia de calibracion :"),t.qZA(),t._uU(22," Comparaci\xf3n directa. "),t.qZA(),t.TgZ(23,"p"),t._uU(24," Laboratorio con equipos patrones que cumplen con trazabilidad metrol\xf3gica al sistema internacional de unidades (SI) "),t.qZA(),t.TgZ(25,"p"),t._uU(26," Calculo de derivada a instrumentos del cliente (tendencia en el tiempo). "),t.qZA()()(),t.TgZ(27,"div",10)(28,"button",11),t.NdJ("click",function(){return e.goForm()}),t._uU(29," Cotiza aqu\xed "),t.qZA()()()(),t.TgZ(30,"div",3),t.YNc(31,Y,8,5,"div",12),t.qZA()()),2&n&&(t.xp6(6),t.Q6J("src",e.image,t.LSH)("alt",e.kind),t.xp6(8),t.hij(" ",e.kind,"."),t.xp6(4),t.hij(" ",e.method,"."),t.xp6(13),t.Q6J("ngForOf",e.instruments))},dependencies:[d.mk,d.sg,l.rH],styles:[".main-lab[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:.5rem;font-size:1.3rem}.main-lab[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;max-height:418px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}.lab-commercial[_ngcontent-%COMP%]{padding:1rem}.lab-commercial[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700}@media (max-width: 992px){.lab-commercial[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 768px){.lab-commercial[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px}}.card[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5%;width:50%}@media (max-width: 1400px){.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}}@media (max-width: 992px){.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}}@media (max-width: 768px){.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}.grow[_ngcontent-%COMP%]{height:187px}"]})}return i})();function Q(i,s){if(1&i&&(t.TgZ(0,"li",9),t._uU(1),t.qZA()),2&i){const o=s.$implicit;t.xp6(1),t.hij(" ",o," ")}}let D=(()=>{class i{constructor(o){this.route=o,this.type="",this.item=null,this.props=[]}ngOnInit(){this.route.queryParams.subscribe(o=>{this.type=function B(i){return i.charAt(0).toUpperCase()+i.slice(1)}(o.type),o.item&&(this.item=JSON.parse(o.item),this.props=this.item?.properties.prop||[])})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-instrument"]],decls:12,vars:4,consts:[[1,"container","pt-5","instrument"],[1,"row"],[1,"col-12","col-md-6","mb-3","text-center"],[1,"mb-2","fw-bold","text-white"],[3,"src","alt"],[1,"col-12","col-md-6","pt-5","card"],[1,"text-center","fw-bold"],[1,"pt-4"],["class","",4,"ngFor","ngForOf"],[1,""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4),t.qZA(),t._UZ(5,"img",4),t.qZA(),t.TgZ(6,"div",5)(7,"div")(8,"h2",6),t._uU(9,"Alcance de actividades"),t.qZA(),t.TgZ(10,"ol",7),t.YNc(11,Q,2,1,"li",8),t.qZA()()()()()),2&n&&(t.xp6(4),t.Oqu(null==e.item?null:e.item.title),t.xp6(1),t.Q6J("src",null==e.item?null:e.item.img,t.LSH)("alt",null==e.item?null:e.item.title),t.xp6(6),t.Q6J("ngForOf",e.props))},dependencies:[d.sg],styles:[".instrument[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;box-shadow:8px 5px 5px #000000a2;border-radius:10px}@media (max-width: 992px){.instrument[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}}@media (max-width: 768px){.instrument[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.instrument[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.2rem}"]})}return i})();var h=c(7158),R=c(8791),z=c(4397),G=c(5699);function H(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," NIT is required. "),t.qZA())}function $(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," NIT must be at least 3 characters long. "),t.qZA())}function X(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,H,2,0,"div",19),t.YNc(2,$,2,0,"div",19),t.qZA()),2&i){const o=t.oxw();let n,e;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("nit"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("nit"))||null==e.errors?null:e.errors.minlength)}}function K(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Company name is required. "),t.qZA())}function W(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Company name must be at least 3 characters long. "),t.qZA())}function tt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,K,2,0,"div",19),t.YNc(2,W,2,0,"div",19),t.qZA()),2&i){const o=t.oxw();let n,e;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("companyName"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("companyName"))||null==e.errors?null:e.errors.minlength)}}function et(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Phone number is required. "),t.qZA())}function ot(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Phone number must be at least 6 digits long. "),t.qZA())}function nt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,et,2,0,"div",19),t.YNc(2,ot,2,0,"div",19),t.qZA()),2&i){const o=t.oxw();let n,e;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("phoneNumber"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("phoneNumber"))||null==e.errors?null:e.errors.pattern)}}function it(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Name is required. "),t.qZA())}function rt(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Name must be at least 3 characters long. "),t.qZA())}function st(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,it,2,0,"div",19),t.YNc(2,rt,2,0,"div",19),t.qZA()),2&i){const o=t.oxw();let n,e;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("name"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("name"))||null==e.errors?null:e.errors.minlength)}}function at(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Email is required. "),t.qZA())}function lt(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Please enter a valid email address. "),t.qZA())}function ct(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Email with this domain is not allowed. "),t.qZA())}function mt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,at,2,0,"div",19),t.YNc(2,lt,2,0,"div",19),t.YNc(3,ct,2,0,"div",19),t.qZA()),2&i){const o=t.oxw();let n,e,a;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("email"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("email"))||null==e.errors?null:e.errors.email),t.xp6(1),t.Q6J("ngIf",null==(a=o.myForm.get("email"))||null==a.errors?null:a.errors.forbiddenDomain)}}function ut(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," New password is required. "),t.qZA())}function dt(i,s){if(1&i&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&i){const o=t.oxw(3);let n;t.xp6(1),t.hij(" ",null==(n=o.myForm.get("newPassword"))||null==n.errors?null:n.errors.passwordStrength," ")}}function pt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ut,2,0,"div",19),t.YNc(2,dt,2,1,"div",19),t.qZA()),2&i){const o=t.oxw(2);let n,e;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("newPassword"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(e=o.myForm.get("newPassword"))||null==e.errors?null:e.errors.passwordStrength)}}function gt(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Confirm password is required. "),t.qZA())}function ht(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," Passwords do not match. "),t.qZA())}function _t(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,gt,2,0,"div",19),t.YNc(2,ht,2,0,"div",19),t.qZA()),2&i){const o=t.oxw(2);let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.myForm.get("confirmPassword"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",o.myForm.hasError("passwordsMismatch"))}}function ft(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",4)(2,"label",21),t._uU(3),t.qZA(),t._UZ(4,"input",22),t.YNc(5,pt,3,2,"div",7),t.qZA(),t.TgZ(6,"div",4)(7,"label",23),t._uU(8),t.qZA(),t._UZ(9,"input",24),t.YNc(10,_t,3,2,"div",7),t.qZA(),t.BQk()),2&i){const o=t.oxw();let n,e;t.xp6(3),t.Oqu(o.dictionary.getText("newPassword")),t.xp6(2),t.Q6J("ngIf",null==(n=o.myForm.get("newPassword"))?null:n.touched),t.xp6(3),t.Oqu(o.dictionary.getText("confirmPassword")),t.xp6(2),t.Q6J("ngIf",null==(e=o.myForm.get("confirmPassword"))?null:e.touched)}}function vt(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"h5",25),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.togglePasswordFields(!0))}),t._uU(1),t.qZA()}if(2&i){const o=t.oxw();t.xp6(1),t.hij(" ",o.dictionary.getText("changePassword")," ")}}function bt(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"h5",25),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.togglePasswordFields(!1))}),t._uU(1),t.qZA()}if(2&i){const o=t.oxw();t.xp6(1),t.hij(" ",o.dictionary.getText("doNotChangePassword")," ")}}const Ct=[{path:"",component:M,children:[{path:"main",component:x},{path:"valves",component:U},{path:"profile",component:(()=>{class i{constructor(o,n,e){this.userService=o,this.authService=n,this.dictionary=e,this.fb=(0,t.f3M)(r.qu),this.showPasswordFields=!1,this.myForm=this.fb.group({email:["",[r.kI.required,r.kI.email,(0,h.C4)([...R.q])]],name:["",[r.kI.required,r.kI.minLength(3)]],nit:["",[r.kI.required,r.kI.minLength(3)]],companyName:["",[r.kI.required,r.kI.minLength(3)]],phoneNumber:["",[r.kI.required,r.kI.pattern(/^\d{6,}$/)]],newPassword:["",[r.kI.required,(0,h.zw)()]],confirmPassword:["",[r.kI.required]]},{validators:(0,h.af)()}),this.user=this.authService.currentUser()}ngOnInit(){this.loadUserDetail()}loadUserDetail(){this.user&&this.userService.getUserNormalById(this.user._id).subscribe(n=>{this.myForm.patchValue({email:n.email,name:n.name,nit:n.nit,companyName:n.companyName,phoneNumber:n.phoneNumber})})}onSubmit(){const o=this.user._id;if(this.showPasswordFields){if(!this.myForm.valid)return this.myForm.markAllAsTouched(),void u().fire("Error","Faltan datos","error");const n=this.user._id;if(this.showPasswordFields&&this.myForm.get("newPassword")?.value!==this.myForm.get("confirmPassword")?.value)return void this.myForm.get("confirmPassword")?.setErrors({passwordsMismatch:!0});this.userService.updateNormalUser(n,this.myForm.value).subscribe({next:e=>{u().fire({title:"Updated",icon:"success"})},error:e=>{u().fire("Error",e,"error")}})}else if(this.myForm.get("email")?.valid&&this.myForm.get("name")?.valid&&this.myForm.get("nit")?.valid&&this.myForm.get("companyName")?.valid&&this.myForm.get("phoneNumber")?.valid){const n=this.myForm.value;delete n.newPassword,delete n.confirmPassword,this.userService.updateNormalUser(o,n).subscribe({next:e=>{u().fire({title:"Updated",icon:"success"})},error:e=>{u().fire("Error",e,"error")}})}}togglePasswordFields(o){this.showPasswordFields=o;const n=this.myForm.get("newPassword"),e=this.myForm.get("confirmPassword");n&&e&&(o?(n.setValidators([r.kI.required,r.kI.minLength(8),(0,h.zw)()]),e.setValidators([r.kI.required,r.kI.minLength(8),(0,h.zw)()])):(n.clearValidators(),e.clearValidators()),n.updateValueAndValidity(),e.updateValueAndValidity())}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(z.f),t.Y36(_.J),t.Y36(G.E))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-profile"]],decls:36,vars:17,consts:[[1,"pt-1","pb-5"],[1,"text-center","text-white"],[1,"user-detail-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nit"],["type","text","id","nit","formControlName","nit",1,"form-control","custom-input-internal"],[4,"ngIf"],["for","companyName"],["type","text","id","companyName","formControlName","companyName",1,"form-control","custom-input-internal"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phoneNumber",1,"form-control","custom-input-internal"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control","custom-input-internal"],[1,"form-group","form-email"],["for","email"],["id","email",1,"fw-bold","text-white"],["type","submit",1,"btn","btn-send"],["class","text-right pt-4 change-password",3,"click",4,"ngIf"],["class","text-white",4,"ngIf"],[1,"text-white"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control","custom-input-internal"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control","custom-input-internal"],[1,"text-right","pt-4","change-password",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(5,"div",4)(6,"label",5),t._uU(7),t.qZA(),t._UZ(8,"input",6),t.YNc(9,X,3,2,"div",7),t.qZA(),t.TgZ(10,"div",4)(11,"label",8),t._uU(12),t.qZA(),t._UZ(13,"input",9),t.YNc(14,tt,3,2,"div",7),t.qZA(),t.TgZ(15,"div",4)(16,"label",10),t._uU(17),t.qZA(),t._UZ(18,"input",11),t.YNc(19,nt,3,2,"div",7),t.qZA(),t.TgZ(20,"div",4)(21,"label",12),t._uU(22),t.qZA(),t._UZ(23,"input",13),t.YNc(24,st,3,2,"div",7),t.qZA(),t.TgZ(25,"div",14)(26,"label",15),t._uU(27),t.qZA(),t.TgZ(28,"p",16),t._uU(29),t.qZA(),t.YNc(30,mt,4,3,"div",7),t.qZA(),t.YNc(31,ft,11,4,"ng-container",7),t.TgZ(32,"button",17),t._uU(33),t.qZA(),t.YNc(34,vt,2,1,"h5",18),t.YNc(35,bt,2,1,"h5",18),t.qZA()()()),2&n){let a,m,g,f,v,Z;t.xp6(2),t.hij(" ",e.dictionary.getText("EditUsersAdmin")," "),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(3),t.Oqu(e.dictionary.getText("nit")),t.xp6(2),t.Q6J("ngIf",null==(a=e.myForm.get("nit"))?null:a.touched),t.xp6(3),t.Oqu(e.dictionary.getText("companyName")),t.xp6(2),t.Q6J("ngIf",null==(m=e.myForm.get("companyName"))?null:m.touched),t.xp6(3),t.Oqu(e.dictionary.getText("phoneNumber")),t.xp6(2),t.Q6J("ngIf",null==(g=e.myForm.get("phoneNumber"))?null:g.touched),t.xp6(3),t.Oqu(e.dictionary.getText("name")),t.xp6(2),t.Q6J("ngIf",null==(f=e.myForm.get("name"))?null:f.touched),t.xp6(3),t.Oqu(e.dictionary.getText("email")),t.xp6(2),t.hij(" ",null==(v=e.myForm.get("email"))?null:v.value," "),t.xp6(1),t.Q6J("ngIf",null==(Z=e.myForm.get("email"))?null:Z.touched),t.xp6(1),t.Q6J("ngIf",e.showPasswordFields),t.xp6(2),t.hij(" ",e.dictionary.getText("saveChanges")," "),t.xp6(1),t.Q6J("ngIf",!e.showPasswordFields),t.xp6(1),t.Q6J("ngIf",e.showPasswordFields)}},dependencies:[d.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".user-detail-form[_ngcontent-%COMP%]{background-color:transparent;border-radius:8px;border:1px solid #ced4da;box-shadow:0 4px 6px #0000001a;margin:0 auto;max-width:700px;padding:20px}.user-detail-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.user-detail-form[_ngcontent-%COMP%]   .form-group-password[_ngcontent-%COMP%]{width:45%}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px;width:45%}@media (max-width: 768px){.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:5px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ced4da;font-size:16px;padding:10px;width:100%}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:focus{border-color:#d3555b;outline:0;box-shadow:0 0 0 .2rem #d3555b85}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{background-color:#f74149;border-radius:5px;border:none;color:#fff;cursor:pointer;display:block;font-size:18px;padding:10px 15px;width:100%}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]:disabled{background-color:#9e5457ea}.user-detail-form[_ngcontent-%COMP%]   .form-email[_ngcontent-%COMP%]{margin:0;text-align:center;width:100%}@media (max-width: 768px){.user-detail-form[_ngcontent-%COMP%]   .form-email[_ngcontent-%COMP%]{width:100%}}.change-password[_ngcontent-%COMP%]{color:#fff;cursor:pointer}"]})}return i})()},{path:"codes/:group/:type",component:y},{path:"control/:group/:type/:control",component:y},{path:"form/:group/:type/:code/:title",component:C},{path:"controlform/:group/:type/:code/:title/:control",component:C},{path:"laboratory",component:k},{path:"laboratory/:type",component:V},{path:"laboratory-section",component:j},{path:"instrument",component:D},{path:"**",redirectTo:"main"}]}];let yt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(Ct),l.Bz]})}return i})();var Zt=c(6208);let xt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[d.ez,r.UX,yt,Zt.m]})}return i})()}}]);