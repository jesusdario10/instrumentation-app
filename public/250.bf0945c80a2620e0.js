"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[250],{2250:(V,y,p)=>{p.r(y),p.d(y,{SolutionsModule:()=>$});var h=p(6814),m=p(9862),r=p(95),d=p(7664),t=p(4946),T=p(9413);let g=(()=>{class o{constructor(){this.baseUrl=T.N.baseUrl,this.http=(0,t.f3M)(m.eN),this.router=(0,t.f3M)(d.F0)}getSolutionsByKind(){const e=`${this.baseUrl}/api/solutions/group/kind`,i=localStorage.getItem("token"),n=(new m.WM).set("Authorization",`Bearer ${i}`);return new Promise((s,l)=>{this.http.get(e,{headers:n}).subscribe(c=>{s(c)},c=>{l(c)})})}getSolutionsByType(e){const i=`${this.baseUrl}/api/solutions/group/type/${e}`,n=localStorage.getItem("token"),s=(new m.WM).set("Authorization",`Bearer ${n}`);return new Promise((l,c)=>{this.http.get(i,{headers:s}).subscribe(u=>{l(u)},u=>{c(u)})})}getServicesByType(e){const i=`${this.baseUrl}/api/solutions/by-type/${e}`,n=localStorage.getItem("token"),s=(new m.WM).set("Authorization",`Bearer ${n}`);return new Promise((l,c)=>{this.http.get(i,{headers:s}).subscribe(u=>{l(u)},u=>{c(u)})})}getServicesById(e){const i=`${this.baseUrl}/api/solutions/${e}`,n=localStorage.getItem("token"),s=(new m.WM).set("Authorization",`Bearer ${n}`);return new Promise((l,c)=>{this.http.get(i,{headers:s}).subscribe(u=>{l(u)},u=>{c(u)})})}editService(e,i){const n=`${this.baseUrl}/api/solutions/${i}`,s=localStorage.getItem("token"),l=(new m.WM).set("Authorization",`Bearer ${s}`);return this.http.patch(n,e,{headers:l}).toPromise()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.goTypes(s))}),t.TgZ(1,"span"),t._uU(2),t.qZA()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e)}}let b=(()=>{class o{constructor(){this.solutionsService=(0,t.f3M)(g),this.router=(0,t.f3M)(d.F0),this.groupTypes=[],this.getGroupTypes()}getGroupTypes(){this.solutionsService.getSolutionsByKind().then(e=>{this.groupTypes=[...e]}).catch(e=>{console.error(e)})}goTypes(e){this.router.navigate(["dashboard/solutions/types",e])}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-type"]],decls:5,vars:1,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"list-type","d-flex","justify-content-center","align-items-center"],["class","group-type-gradient text-center",3,"click",4,"ngFor","ngForOf"],[1,"group-type-gradient","text-center",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Grupos primarios"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,q,3,1,"div",3),t.qZA()()),2&i&&(t.xp6(4),t.Q6J("ngForOf",n.groupTypes))},dependencies:[h.sg],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.list-type[_ngcontent-%COMP%]{flex-wrap:wrap}"]})}return o})();function A(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.goServices(s))}),t.TgZ(1,"span"),t._uU(2),t.qZA()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e)}}let C=(()=>{class o{constructor(e){this.route=e,this.solutionsService=(0,t.f3M)(g),this.router=(0,t.f3M)(d.F0),this.type="",this.groupServices=[]}ngOnInit(){this.route.params.subscribe(e=>{this.type=e.type,this.getServices(this.type)})}getServices(e){this.solutionsService.getSolutionsByType(e).then(i=>{this.groupServices=[...i]}).catch(i=>{console.error(i)})}goServices(e){this.router.navigate(["dashboard/solutions/services",e])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-type-solutions"]],decls:5,vars:2,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],["class","group-type-gradient text-center",3,"click",4,"ngFor","ngForOf"],[1,"group-type-gradient","text-center",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,A,3,1,"div",3),t.qZA()()),2&i&&(t.xp6(2),t.hij("Servicios de ",n.type,""),t.xp6(2),t.Q6J("ngForOf",n.groupServices))},dependencies:[h.sg],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}"]})}return o})();function U(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"strong"),t._uU(7,"Order:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div",8)(10,"strong"),t._uU(11,"Total Hours:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div",8)(14,"strong"),t._uU(15,"Unit Value:"),t.qZA(),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",8)(19,"strong"),t._uU(20,"Hours Equipment:"),t.qZA(),t._uU(21),t.qZA()(),t.TgZ(22,"div",9)(23,"div",4)(24,"strong"),t._uU(25,"Scope:"),t.qZA(),t._uU(26),t.qZA()(),t.TgZ(27,"div",10)(28,"div",11)(29,"div",12),t.O4$(),t.TgZ(30,"svg",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.goEdit(s._id))}),t._UZ(31,"path",14)(32,"path",15),t.qZA()(),t.kcU(),t.TgZ(33,"div",12),t.O4$(),t.TgZ(34,"svg",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteSolution(s._id))}),t._UZ(35,"path",17)(36,"path",18),t.qZA()()()()()()()()}if(2&o){const e=a.$implicit;t.xp6(8),t.hij(" ",e.order," "),t.xp6(4),t.hij(" ",e.totalHours," "),t.xp6(4),t.hij(" ",t.xi3(17,5,e.unitValue,"1.0-0")," "),t.xp6(5),t.hij(" ",e.hoursEquipment," "),t.xp6(5),t.hij(" ",e.scope," ")}}let x=(()=>{class o{constructor(e){this.route=e,this.solutionsService=(0,t.f3M)(g),this.router=(0,t.f3M)(d.F0),this.type="",this.groupServices=[]}ngOnInit(){this.route.params.subscribe(e=>{this.type=e.type,this.getServicesByType(this.type)})}goEdit(e){console.log(e),this.router.navigate(["dashboard/solutions/services-edit",e])}deleteSolution(e){console.log(e)}getServicesByType(e){this.solutionsService.getServicesByType(e).then(i=>{this.groupServices=[...i]}).catch(i=>{console.error(i)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-solutions"]],decls:4,vars:2,consts:[[1,"container"],[1,"text-center","mb-3"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"row","mb-3"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"row","mt-2"],[1,"row","mt-2","text-center"],[1,"d-flex","justify-content-center"],[1,"p-1"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#1e64af","viewBox","0 0 16 16",1,"bi","bi-pencil-square",3,"click"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#d82518","viewBox","0 0 16 16",1,"bi","bi-trash",3,"click"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.YNc(3,U,37,8,"div",2),t.qZA()),2&i&&(t.xp6(2),t.hij("Servicios (",n.type,")"),t.xp6(1),t.Q6J("ngForOf",n.groupServices))},dependencies:[h.sg,h.JJ],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}svg[_ngcontent-%COMP%]{cursor:pointer}"]})}return o})();var F=p(3519),Z=p.n(F);function k(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido"),t.qZA())}function w(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido"),t.qZA())}function M(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido"),t.qZA())}function I(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido"),t.qZA())}function E(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido o minimo 1"),t.qZA())}function N(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido o minimo 1"),t.qZA())}function J(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido o minimo 1"),t.qZA())}function O(o,a){1&o&&(t.TgZ(0,"div",23),t._uU(1,"Requerido o minimo 1"),t.qZA())}const B=[{path:"",component:b},{path:"types/:type",component:C},{path:"services/:type",component:x},{path:"services-edit/:id",component:(()=>{class o{constructor(e,i){this.route=e,this.formBuilder=i,this.id="",this.solutionsService=(0,t.f3M)(g),this.router=(0,t.f3M)(d.F0),this.solution={type:"",kind:"",scope:"",notes:"",order:0,hoursEquipment:0,totalHours:0,unitValue:0},this.editSolutionForm=this.formBuilder.group({type:["",r.kI.required],kind:["",r.kI.required],scope:["",r.kI.required],notes:["",r.kI.required],order:["",[r.kI.required,r.kI.min(1)]],hoursEquipment:["",[r.kI.required,r.kI.min(1)]],totalHours:["",[r.kI.required,r.kI.min(1)]],unitValue:["",[r.kI.required,r.kI.min(1)]]})}ngOnInit(){this.route.params.subscribe(e=>{this.id=e.id,this.getSolution(this.id)})}getSolution(e){this.solutionsService.getServicesById(e).then(i=>{this.solution=i,this.editSolutionForm.patchValue({type:this.solution.type,kind:this.solution.kind,scope:this.solution.scope,notes:this.solution.notes,order:this.solution.order,hoursEquipment:this.solution.hoursEquipment,totalHours:this.solution.totalHours,unitValue:this.solution.unitValue})}).catch(i=>{console.error(i)})}onSubmit(){this.editSolutionForm.valid?this.solutionsService.editService(this.editSolutionForm.value,this.id).then(e=>{Z().fire({title:"\xa1\xc9xito!",text:"Servicio actualizado",icon:"success",confirmButtonText:"Ok"})}).catch(e=>{Z().fire("Error","Ocurrio un error inesperado","error")}):this.markFormGroupTouched(this.editSolutionForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(i=>{i.markAsTouched(),i instanceof r.cw&&this.markFormGroupTouched(i)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.gz),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-services"]],decls:49,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","type",1,"form-label"],["type","text","id","type","formControlName","type",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","id","kind","formControlName","kind",1,"form-control"],["for","scope",1,"form-label"],["id","scope","formControlName","scope","rows","4",1,"form-control"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2",1,"form-control"],["for","order",1,"form-label"],["type","number","id","order","formControlName","order","min","1",1,"form-control"],["for","hoursEquipment",1,"form-label"],["type","number","id","hoursEquipment","formControlName","hoursEquipment","min","1",1,"form-control"],["for","totalHours",1,"form-label"],["type","number","id","totalHours","formControlName","totalHours","min","1",1,"form-control"],["for","unitValue",1,"form-label"],["type","number","id","unitValue","formControlName","unitValue","min","1",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(i,n){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Type"),t.qZA(),t._UZ(7,"input",6),t.YNc(8,k,2,0,"div",7),t.qZA(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11,"Kind"),t.qZA(),t._UZ(12,"input",8),t.YNc(13,w,2,0,"div",7),t.qZA(),t.TgZ(14,"div",4)(15,"label",9),t._uU(16,"Scope"),t.qZA(),t._UZ(17,"textarea",10),t.YNc(18,M,2,0,"div",7),t.qZA(),t.TgZ(19,"div",4)(20,"label",11),t._uU(21,"Notes"),t.qZA(),t._UZ(22,"textarea",12),t.YNc(23,I,2,0,"div",7),t.qZA()(),t.TgZ(24,"div",3)(25,"div",4)(26,"label",13),t._uU(27,"Order"),t.qZA(),t._UZ(28,"input",14),t.YNc(29,E,2,0,"div",7),t.qZA(),t.TgZ(30,"div",4)(31,"label",15),t._uU(32,"Hours Equipment"),t.qZA(),t._UZ(33,"input",16),t.YNc(34,N,2,0,"div",7),t.qZA(),t.TgZ(35,"div",4)(36,"label",17),t._uU(37,"Total Hours"),t.qZA(),t._UZ(38,"input",18),t.YNc(39,J,2,0,"div",7),t.qZA(),t.TgZ(40,"div",4)(41,"label",19),t._uU(42,"Unit Value"),t.qZA(),t._UZ(43,"input",20),t.YNc(44,O,2,0,"div",7),t.qZA()()(),t.TgZ(45,"div",2)(46,"div",21)(47,"button",22),t._uU(48,"Guardar"),t.qZA()()()()()),2&i){let s,l,c,u,v,f,_,S;t.Q6J("formGroup",n.editSolutionForm),t.xp6(8),t.Q6J("ngIf",(null==(s=n.editSolutionForm.get("type"))?null:s.invalid)&&(null==(s=n.editSolutionForm.get("type"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=n.editSolutionForm.get("kind"))?null:l.invalid)&&(null==(l=n.editSolutionForm.get("kind"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(c=n.editSolutionForm.get("scope"))?null:c.invalid)&&(null==(c=n.editSolutionForm.get("scope"))?null:c.touched)),t.xp6(5),t.Q6J("ngIf",(null==(u=n.editSolutionForm.get("notes"))?null:u.invalid)&&(null==(u=n.editSolutionForm.get("notes"))?null:u.touched)),t.xp6(6),t.Q6J("ngIf",(null==(v=n.editSolutionForm.get("order"))?null:v.invalid)&&(null==(v=n.editSolutionForm.get("order"))?null:v.touched)),t.xp6(5),t.Q6J("ngIf",(null==(f=n.editSolutionForm.get("hoursEquipment"))?null:f.invalid)&&(null==(f=n.editSolutionForm.get("hoursEquipment"))?null:f.touched)),t.xp6(5),t.Q6J("ngIf",(null==(_=n.editSolutionForm.get("totalHours"))?null:_.invalid)&&(null==(_=n.editSolutionForm.get("totalHours"))?null:_.touched)),t.xp6(5),t.Q6J("ngIf",(null==(S=n.editSolutionForm.get("unitValue"))?null:S.invalid)&&(null==(S=n.editSolutionForm.get("unitValue"))?null:S.touched))}},dependencies:[h.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u]})}return o})()}];let H=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(B),d.Bz]})}return o})(),$=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[h.ez,m.JF,r.u5,r.UX,H]})}return o})()}}]);