"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[269],{3269:(we,C,d)=>{d.r(C),d.d(C,{UsersModule:()=>Ce});var h=d(6814),m=d(5476),e=d(4769),c=d(9862),T=d(9413);let x=(()=>{class t{constructor(){this.baseUrl=T.N.baseUrl,this.http=(0,e.f3M)(c.eN)}getAdminUsers(){const n=`${this.baseUrl}/api/auth/all`,o=localStorage.getItem("token"),r=(new c.WM).set("Authorization",`Bearer ${o}`);return this.http.get(n,{headers:r})}getUserById(n){const o=localStorage.getItem("token"),r=(new c.WM).set("Authorization",`Bearer ${o}`);return this.http.get(`${this.baseUrl}/api/auth/${n}`,{headers:r})}addUser(n){const o=localStorage.getItem("token"),r=(new c.WM).set("Authorization",`Bearer ${o}`);return this.http.post(`${this.baseUrl}/api/auth`,n,{headers:r})}updateAdminUser(n,o){const r=`${this.baseUrl}/api/auth/${n}`,l=localStorage.getItem("token"),a=(new c.WM).set("Authorization",`Bearer ${l}`);return this.http.patch(r,o,{headers:a})}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function q(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"span")(4,"strong"),e._uU(5,"Nombre:"),e.qZA(),e._uU(6),e.qZA()(),e.TgZ(7,"div",7)(8,"strong"),e._uU(9,"Email:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div",8)(12,"button",9),e.NdJ("click",function(){const l=e.CHM(n).$implicit,a=e.oxw();return e.KtG(a.navigateToUserDetail(l._id))}),e.TgZ(13,"i"),e._uU(14,"Edit"),e.qZA()()()()()}if(2&t){const n=i.$implicit;e.xp6(6),e.hij(" ",n.name,""),e.xp6(4),e.hij(" ",n.email,"")}}let P=(()=>{class t{constructor(n,o){this.usersService=n,this.router=o,this.users=[]}ngOnInit(){this.loadUsers()}loadUsers(){this.usersService.getAdminUsers().subscribe({next:n=>{this.users=n},error:n=>{console.error("There was an error!",n)}})}navigateToUserDetail(n){this.router.navigate(["/dashboard/users",n])}createUser(){this.router.navigate(["/dashboard/users/add"])}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(x),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-users"]],decls:8,vars:1,consts:[[1,"users-list-container","container"],[1,"text-center"],[1,"text-center","title","pt-5","pb-5"],[1,"edit-btn","create-btn",3,"click"],["class","user-card",4,"ngFor","ngForOf"],[1,"user-card"],[1,"user-info"],[1,"user-detail"],[1,"user-detail","user-actions","text-center"],[1,"edit-btn",3,"click"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Gestion de usuarios admin"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.createUser()}),e.TgZ(5,"i"),e._uU(6,"Create Users"),e.qZA()()(),e.YNc(7,q,15,2,"div",4),e.qZA()),2&o&&(e.xp6(7),e.Q6J("ngForOf",r.users))},dependencies:[h.sg],styles:[".users-list-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;margin-bottom:1rem}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 8px #0000001a;border-radius:10px;overflow:hidden;width:100%;display:flex;flex-direction:column;justify-content:space-between;margin-bottom:1rem}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;padding:1rem;justify-content:space-between;flex-wrap:wrap}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]{width:45%;display:flex;align-items:center;color:#34495e}@media (max-width: 768px){.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]{text-align:center;width:100%}}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-actions[_ngcontent-%COMP%]{width:10%}@media (max-width: 768px){.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-actions[_ngcontent-%COMP%]{display:block;text-align:center;width:100%}}.edit-btn[_ngcontent-%COMP%]{width:70px;display:inline;background:#f74149;color:#fff;border:none;cursor:pointer;padding:10px;border-radius:5px;transition:background-color .3s}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#d3555b}.create-btn[_ngcontent-%COMP%]{width:165px;margin-bottom:1.5rem}"]})}return t})();var s=d(95),N=d(3519),u=d.n(N);const w=["gmail","outlook","yahoo","icloud","mail","hotmail","msn","live","aol","protonmail","zoho","gmx","web","yandex","mail.ru","libero","t-online","orange","comcast","sbcglobal","btinternet"];function y(t){return i=>{const n=i.value;if(!n)return null;const o=n.split("@")[1];return o&&t.some(r=>o.includes(r))?{forbiddenDomain:{value:i.value}}:null}}var Z=d(5699);function A(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," NIT is required. "),e.qZA())}function F(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," NIT must be at least 3 characters long. "),e.qZA())}function I(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,A,2,0,"div",18),e.YNc(2,F,2,0,"div",18),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("nit"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("nit"))||null==r.errors?null:r.errors.minlength)}}function O(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Company name is required. "),e.qZA())}function M(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Company name must be at least 3 characters long. "),e.qZA())}function J(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,O,2,0,"div",18),e.YNc(2,M,2,0,"div",18),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("companyName"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("companyName"))||null==r.errors?null:r.errors.minlength)}}function k(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Phone number is required. "),e.qZA())}function Y(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Phone number must be at least 6 digits long. "),e.qZA())}function Q(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,k,2,0,"div",18),e.YNc(2,Y,2,0,"div",18),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("phoneNumber"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("phoneNumber"))||null==r.errors?null:r.errors.pattern)}}function D(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Email is required. "),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Please enter a valid email address. "),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Email with this domain is not allowed. "),e.qZA())}function L(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,2,0,"div",18),e.YNc(2,S,2,0,"div",18),e.YNc(3,j,2,0,"div",18),e.qZA()),2&t){const n=e.oxw();let o,r,l;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("email"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("email"))||null==r.errors?null:r.errors.email),e.xp6(1),e.Q6J("ngIf",null==(l=n.myForm.get("email"))||null==l.errors?null:l.errors.forbiddenDomain)}}function z(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Name is required. "),e.qZA())}function V(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Name must be at least 3 characters long. "),e.qZA())}function E(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,z,2,0,"div",18),e.YNc(2,V,2,0,"div",18),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("name"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("name"))||null==r.errors?null:r.errors.minlength)}}function $(t,i){if(1&t&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);let o;e.xp6(1),e.hij(" ",null==(o=n.myForm.get("newPassword"))||null==o.errors?null:o.errors.passwordStrength," ")}}function B(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," Passwords do not match. "),e.qZA())}function G(t,i){if(1&t&&(e.TgZ(0,"div")(1,"div",4)(2,"label",20),e._uU(3),e.qZA(),e._UZ(4,"input",21),e.YNc(5,$,2,1,"div",18),e.qZA(),e.TgZ(6,"div",4)(7,"label",22),e._uU(8),e.qZA(),e._UZ(9,"input",23),e.YNc(10,B,2,0,"div",18),e.qZA()()),2&t){const n=e.oxw();let o,r;e.xp6(3),e.Oqu(n.dictionary.getText("newPassword")),e.xp6(2),e.Q6J("ngIf",null==(o=n.myForm.get("newPassword"))||null==o.errors?null:o.errors.passwordStrength),e.xp6(3),e.Oqu(n.dictionary.getText("confirmPassword")),e.xp6(2),e.Q6J("ngIf",null==(r=n.myForm.get("confirmPassword"))||null==r.errors?null:r.errors.mismatch)}}function W(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"h5",24),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.togglePasswordFields(!0))}),e._uU(1),e.qZA()}if(2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.dictionary.getText("changePassword")," ")}}function X(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"h5",24),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.togglePasswordFields(!1))}),e._uU(1),e.qZA()}if(2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.dictionary.getText("doNotChangePassword")," ")}}let H=(()=>{class t{constructor(n,o,r,l){this.route=n,this.userService=o,this.dictionary=r,this.router=l,this.fb=(0,e.f3M)(s.qu),this.showPasswordFields=!1,this.userId="",this.myForm=this.fb.group({email:["",[s.kI.required,s.kI.email,y([...w])]],name:["",[s.kI.required,s.kI.minLength(3)]],nit:["",[s.kI.required,s.kI.minLength(3)]],companyName:["",[s.kI.required,s.kI.minLength(3)]],phoneNumber:["",[s.kI.required,s.kI.pattern(/^\d{6,}$/)]],newPassword:[""],confirmPassword:[""]},{validators:t=>{const i=t.get("password")?.value,n=t.get("confirmPassword")?.value;return i&&n&&i===n?null:{passwordsMismatch:"Passwords do not match"}}})}ngOnInit(){this.route.params.subscribe(n=>{this.userId=n.id,this.loadUserDetail()})}loadUserDetail(){this.userService.getUserById(this.userId).subscribe(n=>{console.log(n),this.myForm.patchValue({email:n.email,name:n.name,nit:n.nit,companyName:n.companyName,phoneNumber:n.phoneNumber})})}onSubmit(){if(this.showPasswordFields)this.showPasswordFields&&""!==this.myForm.get("newPassword")?.value&&""!==this.myForm.get("confirmPassword")?.value&&this.myForm.get("newPassword")?.valid&&this.myForm.get("confirmPassword")?.valid&&this.myForm.get("email")?.valid&&this.myForm.get("name")?.valid&&this.myForm.get("nit")?.valid&&this.myForm.get("companyName")?.valid&&this.myForm.get("phoneNumber")?.valid&&this.userService.updateAdminUser(this.userId,this.myForm.value).subscribe({next:n=>{u().fire({title:"Updated",icon:"success"})},error:n=>{u().fire("Error",n,"error")}});else if(this.myForm.get("email")?.valid&&this.myForm.get("name")?.valid&&this.myForm.get("nit")?.valid&&this.myForm.get("companyName")?.valid&&this.myForm.get("phoneNumber")?.valid){const n=this.myForm.value;delete n.newPassword,delete n.confirmPassword,console.log(n),this.userService.updateAdminUser(this.userId,n).subscribe({next:o=>{u().fire({title:"Updated",icon:"success"})},error:o=>{u().fire("Error",o,"error")}})}}togglePasswordFields(n){this.showPasswordFields=n;const o=this.myForm.get("newPassword"),r=this.myForm.get("confirmPassword");o&&r&&(n?(o.setValidators([s.kI.required,s.kI.minLength(8),t=>{const i=t.value;if(!i)return null;const n=/[A-Z]/.test(i),o=/[a-z]/.test(i),r=/\d/.test(i),l=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(i);return n&&o&&r&&l&&i.length>=8?null:{passwordStrength:"Password must be at least 8 characters and include uppercase, lowercase, number, and special character."}}]),r.setValidators([s.kI.required,s.kI.minLength(8),t=>{const i=t.value;if(!i)return null;const n=/[A-Z]/.test(i),o=/[a-z]/.test(i),r=/\d/.test(i),l=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(i);return n&&o&&r&&l&&i.length>=8?null:{passwordStrength:"Password must be at least 8 characters and include uppercase, lowercase, number, and special character."}}])):(o.clearValidators(),r.clearValidators()),o.updateValueAndValidity(),r.updateValueAndValidity())}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(m.gz),e.Y36(x),e.Y36(Z.E),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-detail"]],decls:36,vars:17,consts:[[1,"pt-5","pb-5"],[1,"text-center","text-white"],[1,"user-detail-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nit"],["type","text","id","nit","formControlName","nit",1,"form-control","custom-input-internal"],[4,"ngIf"],["for","companyName"],["type","text","id","companyName","formControlName","companyName",1,"form-control","custom-input-internal"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phoneNumber",1,"form-control","custom-input-internal"],["for","email"],["id","email",1,"fw-bold","text-white"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control","custom-input-internal"],["type","submit",1,"btn","btn-send"],["class","text-right pt-4 change-password",3,"click",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control","custom-input-internal"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control","custom-input-internal"],[1,"text-right","pt-4","change-password",3,"click"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7),e.qZA(),e._UZ(8,"input",6),e.YNc(9,I,3,2,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12),e.qZA(),e._UZ(13,"input",9),e.YNc(14,J,3,2,"div",7),e.qZA(),e.TgZ(15,"div",4)(16,"label",10),e._uU(17),e.qZA(),e._UZ(18,"input",11),e.YNc(19,Q,3,2,"div",7),e.qZA(),e.TgZ(20,"div",4)(21,"label",12),e._uU(22),e.qZA(),e.TgZ(23,"p",13),e._uU(24),e.qZA(),e.YNc(25,L,4,3,"div",7),e.qZA(),e.TgZ(26,"div",4)(27,"label",14),e._uU(28),e.qZA(),e._UZ(29,"input",15),e.YNc(30,E,3,2,"div",7),e.qZA(),e.YNc(31,G,11,4,"div",7),e.TgZ(32,"button",16),e._uU(33),e.qZA(),e.YNc(34,W,2,1,"h5",17),e.YNc(35,X,2,1,"h5",17),e.qZA()()()),2&o){let l,a,p,_,g,f;e.xp6(2),e.hij(" ",r.dictionary.getText("EditUsersAdmin")," "),e.xp6(2),e.Q6J("formGroup",r.myForm),e.xp6(3),e.Oqu(r.dictionary.getText("nit")),e.xp6(2),e.Q6J("ngIf",null==(l=r.myForm.get("nit"))?null:l.touched),e.xp6(3),e.Oqu(r.dictionary.getText("companyName")),e.xp6(2),e.Q6J("ngIf",null==(a=r.myForm.get("companyName"))?null:a.touched),e.xp6(3),e.Oqu(r.dictionary.getText("phoneNumber")),e.xp6(2),e.Q6J("ngIf",null==(p=r.myForm.get("phoneNumber"))?null:p.touched),e.xp6(3),e.Oqu(r.dictionary.getText("email")),e.xp6(2),e.hij(" ",null==(_=r.myForm.get("email"))?null:_.value," "),e.xp6(1),e.Q6J("ngIf",null==(g=r.myForm.get("email"))?null:g.touched),e.xp6(3),e.Oqu(r.dictionary.getText("name")),e.xp6(2),e.Q6J("ngIf",null==(f=r.myForm.get("name"))?null:f.touched),e.xp6(1),e.Q6J("ngIf",r.showPasswordFields),e.xp6(2),e.hij(" ",r.dictionary.getText("saveChanges")," "),e.xp6(1),e.Q6J("ngIf",!r.showPasswordFields),e.xp6(1),e.Q6J("ngIf",r.showPasswordFields)}},dependencies:[h.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".user-detail-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px;border:1px solid #ced4da;border-radius:8px;background-color:transparent;box-shadow:0 4px 6px #0000001a}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;font-size:16px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:focus{border-color:#d3555b;outline:0;box-shadow:0 0 0 .2rem #d3555b85}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;font-size:18px;border-radius:5px;border:none;cursor:pointer;background-color:#f74149;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]:disabled{background-color:#9e5457ea}.change-password[_ngcontent-%COMP%]{color:#fff;cursor:pointer}"]})}return t})();function K(t,i){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.dictionary.getText("emailRequired")," ")}}function R(t,i){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.dictionary.getText("validAddress")," ")}}function ee(t,i){if(1&t&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.dictionary.getText("domainNotAllowed")," ")}}function te(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,K,2,1,"div",21),e.YNc(2,R,2,1,"div",21),e.YNc(3,ee,2,1,"div",22),e.qZA()),2&t){const n=e.oxw();let o,r,l;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("email"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("email"))||null==r.errors?null:r.errors.email),e.xp6(1),e.Q6J("ngIf",null==(l=n.myForm.get("email"))||null==l.errors?null:l.errors.forbiddenDomain)}}function ne(t,i){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.dictionary.getText("nameRequired")," ")}}function re(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Name must be at least 3 characters long. "),e.qZA())}function oe(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ne,2,1,"div",21),e.YNc(2,re,2,0,"div",21),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("name"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("name"))||null==r.errors?null:r.errors.minlength)}}function ie(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," NIT is required. "),e.qZA())}function se(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," NIT must be at least 3 characters long. "),e.qZA())}function le(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ie,2,0,"div",21),e.YNc(2,se,2,0,"div",21),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("nit"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("nit"))||null==r.errors?null:r.errors.minlength)}}function ae(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Company name is required. "),e.qZA())}function de(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Company name must be at least 3 characters long. "),e.qZA())}function me(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ae,2,0,"div",21),e.YNc(2,de,2,0,"div",21),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("companyName"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("companyName"))||null==r.errors?null:r.errors.minlength)}}function ue(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Phone number is required. "),e.qZA())}function ce(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Phone number must be at least 6 digits long. "),e.qZA())}function pe(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ue,2,0,"div",21),e.YNc(2,ce,2,0,"div",21),e.qZA()),2&t){const n=e.oxw();let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("phoneNumber"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=n.myForm.get("phoneNumber"))||null==r.errors?null:r.errors.pattern)}}function _e(t,i){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);let o;e.xp6(1),e.hij(" ",null==(o=n.myForm.get("password"))||null==o.errors?null:o.errors.passwordStrength," ")}}function ge(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,_e,2,1,"div",21),e.qZA()),2&t){const n=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("password"))||null==o.errors?null:o.errors.passwordStrength)}}function fe(t,i){1&t&&(e.TgZ(0,"div",23),e._uU(1," Passwords do not match. "),e.qZA())}function he(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,fe,2,0,"div",21),e.qZA()),2&t){const n=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=n.myForm.get("confirmPassword"))||null==o.errors?null:o.errors.passwordsMismatch)}}const xe=[{path:"",component:P},{path:"add",component:(()=>{class t{constructor(n,o,r,l,a){this.fb=n,this.route=o,this.dictionary=r,this.userService=l,this.router=a,this.showPassword=!1,this.myForm=this.fb.group({email:["",[s.kI.required,s.kI.email,y([...w])]],name:["",[s.kI.required,s.kI.minLength(3)]],nit:["",[s.kI.required,s.kI.minLength(3)]],companyName:["",[s.kI.required,s.kI.minLength(3)]],phoneNumber:["",[s.kI.required,s.kI.pattern(/^\d{6,}$/)]],password:["",[s.kI.required,t=>{const i=t.value;if(!i)return null;const n=/[A-Z]/.test(i),o=/[a-z]/.test(i),r=/\d/.test(i),l=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(i);return n&&o&&r&&l&&i.length>=8?null:{passwordStrength:"Password must be at least 8 characters and include uppercase, lowercase, number, and special character."}}]],confirmPassword:["",[s.kI.required]]},{validators:t=>{const i=t.get("password")?.value,n=t.get("confirmPassword")?.value;return i&&n&&i===n?null:{passwordsMismatch:"Passwords do not match"}}})}ngOnInit(){}onSubmit(){if(this.myForm.valid){const n={...this.myForm.value};"confirmPassword"in n&&delete n.confirmPassword,n.roles=["control"],this.userService.addUser(n).subscribe({next:o=>{u().fire({title:"Created",icon:"success"}),this.router.navigate(["/dashboard/users"])},error:o=>{u().fire("Error",o,"error")}})}else u().fire({title:"Validation Error",text:"Please check the form",icon:"error"})}toggleShowPassword(){this.showPassword=!this.showPassword}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(m.gz),e.Y36(Z.E),e.Y36(x),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-users"]],decls:42,vars:22,consts:[[1,"pt-5","pb-5"],[1,"text-center","text-white"],[1,"user-detail-form","pt-5"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control","custom-input-internal"],[4,"ngIf"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control","custom-input-internal"],["for","nit"],["type","text","id","nit","formControlName","nit",1,"form-control","custom-input-internal",3,"placeholder"],["for","companyName"],["type","text","id","companyName","formControlName","companyName",1,"form-control","custom-input-internal",3,"placeholder"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phoneNumber",1,"form-control","custom-input-internal"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control","custom-input-internal",3,"type"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control","custom-input-internal",3,"type"],["type","submit",1,"btn","btn-send",3,"disabled"],["class","text-danger",4,"ngIf"],["class","text-white",4,"ngIf"],[1,"text-danger"],[1,"text-white"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7),e.qZA(),e._UZ(8,"input",6),e.YNc(9,te,4,3,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12),e.qZA(),e._UZ(13,"input",9),e.YNc(14,oe,3,2,"div",7),e.qZA(),e.TgZ(15,"div",4)(16,"label",10),e._uU(17),e.qZA(),e._UZ(18,"input",11),e.YNc(19,le,3,2,"div",7),e.qZA(),e.TgZ(20,"div",4)(21,"label",12),e._uU(22),e.qZA(),e._UZ(23,"input",13),e.YNc(24,me,3,2,"div",7),e.qZA(),e.TgZ(25,"div",4)(26,"label",14),e._uU(27),e.qZA(),e._UZ(28,"input",15),e.YNc(29,pe,3,2,"div",7),e.qZA(),e.TgZ(30,"div",4)(31,"label",16),e._uU(32),e.qZA(),e._UZ(33,"input",17),e.YNc(34,ge,2,1,"div",7),e.qZA(),e.TgZ(35,"div",4)(36,"label",18),e._uU(37),e.qZA(),e._UZ(38,"input",19),e.YNc(39,he,2,1,"div",7),e.qZA(),e.TgZ(40,"button",20),e._uU(41),e.qZA()()()()),2&o){let l,a,p,_,g,f,U;e.xp6(2),e.hij(" ",r.dictionary.getText("createAdminUser")," "),e.xp6(2),e.Q6J("formGroup",r.myForm),e.xp6(3),e.Oqu(r.dictionary.getText("email")),e.xp6(2),e.Q6J("ngIf",null==(l=r.myForm.get("email"))?null:l.touched),e.xp6(3),e.Oqu(r.dictionary.getText("name")),e.xp6(2),e.Q6J("ngIf",null==(a=r.myForm.get("name"))?null:a.touched),e.xp6(3),e.Oqu(r.dictionary.getText("nit")),e.xp6(1),e.s9C("placeholder",r.dictionary.getText("enterNit")),e.xp6(1),e.Q6J("ngIf",null==(p=r.myForm.get("nit"))?null:p.touched),e.xp6(3),e.Oqu(r.dictionary.getText("companyName")),e.xp6(1),e.s9C("placeholder",r.dictionary.getText("enterCompanyName")),e.xp6(1),e.Q6J("ngIf",null==(_=r.myForm.get("companyName"))?null:_.touched),e.xp6(3),e.Oqu(r.dictionary.getText("phoneNumber")),e.xp6(2),e.Q6J("ngIf",null==(g=r.myForm.get("phoneNumber"))?null:g.touched),e.xp6(3),e.Oqu(r.dictionary.getText("password")),e.xp6(1),e.Q6J("type",r.showPassword?"text":"password"),e.xp6(1),e.Q6J("ngIf",null==(f=r.myForm.get("password"))?null:f.touched),e.xp6(3),e.Oqu(r.dictionary.getText("confirmPassword")),e.xp6(1),e.Q6J("type",r.showPassword?"text":"password"),e.xp6(1),e.Q6J("ngIf",null==(U=r.myForm.get("confirmPassword"))?null:U.touched),e.xp6(1),e.Q6J("disabled",!r.myForm.valid),e.xp6(1),e.hij(" ",r.dictionary.getText("createUser")," ")}},dependencies:[h.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".user-detail-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px;border:1px solid #ced4da;border-radius:8px;background-color:transparent;box-shadow:0 4px 6px #0000001a}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;font-size:16px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:focus{border-color:#d3555b;outline:0;box-shadow:0 0 0 .2rem #d3555b85}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;font-size:18px;border-radius:5px;border:none;cursor:pointer;background-color:#f74149;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]:disabled{background-color:#9e5457ea}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:-20px}"]})}return t})()},{path:":id",component:H}];let ve=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(xe),m.Bz]})}return t})(),Ce=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[h.ez,ve,c.JF,s.UX]})}return t})()}}]);