"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[425],{2425:(ct,y,a)=>{a.r(y),a.d(y,{SolutionsModule:()=>st});var v=a(6814),F=a(9862),r=a(95),c=a(7664),t=a(4946),T=a(9989);let V=(()=>{class e{constructor(o){this.route=o,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.group="",this.types=[]}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group,this.getServices(this.group)})}getServices(o){this.solutionsService.getByType(o).then(n=>{console.log(n),this.types=[...n]}).catch(n=>{console.error(n)})}goCodes(o){this.router.navigate(["dashboard/solutions/codes",this.group,o])}goControl(){this.router.navigate(["dashboard/solutions/control"])}create(){this.router.navigate(["dashboard/solutions/services-create",this.group])}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-type-solutions"]],decls:16,vars:1,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center","types-content","d-flex","justify-content-center","align-items-center",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return i.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return i.goCodes("Valvulas de seguridad")}),t.TgZ(8,"span"),t._uU(9,"Valvulas de seguridad"),t.qZA()(),t.TgZ(10,"div",5),t.NdJ("click",function(){return i.goCodes("V\xe1lvulas Manuales")}),t.TgZ(11,"span"),t._uU(12,"V\xe1lvulas Manuales"),t.qZA()(),t.TgZ(13,"div",5),t.NdJ("click",function(){return i.goControl()}),t.TgZ(14,"span"),t._uU(15,"V\xe1lvulas de Control"),t.qZA()()()()),2&n&&(t.xp6(2),t.hij("Servicios de ",i.group,""))},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#1e64af;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#4a00e0,#8e2de2);border-color:#fff;color:#fff}.types-content[_ngcontent-%COMP%]{height:210px}"]})}return e})();var U=a(3519),_=a.n(U);function x(e,u){if(1&e){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"strong"),t._uU(7,"Order:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div",9)(10,"strong"),t._uU(11,"Total Hours:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div",9)(14,"strong"),t._uU(15,"Unit Value:"),t.qZA(),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",9)(19,"strong"),t._uU(20,"Hours Equipment:"),t.qZA(),t._uU(21),t.qZA()(),t.TgZ(22,"div",10)(23,"div",5)(24,"strong"),t._uU(25,"Scope:"),t.qZA(),t._uU(26),t.qZA()(),t.TgZ(27,"div",11)(28,"div",12)(29,"div",13),t.O4$(),t.TgZ(30,"svg",14),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.goEdit(l._id))}),t._UZ(31,"path",15)(32,"path",16),t.qZA()(),t.kcU(),t.TgZ(33,"div",13),t.O4$(),t.TgZ(34,"svg",17),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.deleteSolution(l._id))}),t._UZ(35,"path",18)(36,"path",19),t.qZA()()()()()()()()}if(2&e){const o=u.$implicit;t.xp6(8),t.hij(" ",o.order," "),t.xp6(4),t.hij(" ",o.totalHours," "),t.xp6(4),t.hij(" ",t.xi3(17,5,o.unitValue,"1.0-0")," "),t.xp6(5),t.hij(" ",o.hoursEquipment," "),t.xp6(5),t.hij(" ",o.scope," ")}}let b=(()=>{class e{constructor(o){this.route=o,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.group="",this.type="",this.code="",this.control="",this.groupServices=[]}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group,this.type=o.type,this.code=o.code,this.control=o.control,this.getServicesByType(this.group,this.type,this.code,this.control)})}goEdit(o){this.router.navigate(["dashboard/solutions/services-edit",o])}deleteSolution(o){_().fire({title:"\xbfEst\xe1s seguro?",text:"\xa1No podr\xe1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrarlo!",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.solutionsService.deleteSolution(o).then(()=>{_().fire("Borrado!","\xa1Tu soluci\xf3n ha sido eliminada.","success").then(()=>{this.getServicesByType(this.group,this.type,this.code,this.control)})}).catch(i=>{_().fire("Error!","Ha ocurrido un error al intentar borrar la soluci\xf3n.","error"),console.error(i)})})}getServicesByType(o,n,i,l){this.solutionsService.getServicesByGroupTypeAndCode(o,n,i,l).then(s=>{this.groupServices=[...s]}).catch(s=>{console.error(s)})}create(){this.router.navigate(this.control?["dashboard/solutions/service-control","Valves","V\xe1lvulas de Control",this.control,this.code]:["dashboard/solutions/services-create",this.group,this.type,this.code])}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-solutions"]],decls:7,vars:2,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"btn","text-center",3,"click"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"row","mb-3"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"row","mt-2"],[1,"row","mt-2","text-center"],[1,"d-flex","justify-content-center"],[1,"p-1"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#1e64af","viewBox","0 0 16 16",1,"bi","bi-pencil-square",3,"click"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#d82518","viewBox","0 0 16 16",1,"bi","bi-trash",3,"click"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return i.create()}),t._uU(5,"Crear"),t.qZA()(),t.YNc(6,x,37,8,"div",3),t.qZA()),2&n&&(t.xp6(2),t.hij("Servicios (",i.type,")"),t.xp6(4),t.Q6J("ngForOf",i.groupServices))},dependencies:[v.sg,v.JJ],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}svg[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{background:#1e64af;color:#fff;font-weight:700;height:50px;width:200px}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#4a00e0,#8e2de2);border-color:#fff;color:#fff}"]})}return e})();function k(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function N(e,u){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=u.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function E(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function J(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function w(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function I(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function O(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function M(e,u){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=u.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function Y(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function Q(e,u){if(1&e&&(t.TgZ(0,"div",4)(1,"label",30),t._uU(2,"Control"),t.qZA(),t.TgZ(3,"select",31),t.YNc(4,M,2,2,"option",10),t.qZA(),t.YNc(5,Y,2,0,"div",7),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(4),t.Q6J("ngForOf",o.controlOptions),t.xp6(1),t.Q6J("ngIf",(null==(n=o.editSolutionForm.get("control"))?null:n.invalid)&&(null==(n=o.editSolutionForm.get("control"))?null:n.touched))}}function H(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function B(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function j(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}let L=(()=>{class e{constructor(o,n){this.route=o,this.formBuilder=n,this.id="",this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.typeOptions=["Valvulas de seguridad","V\xe1lvulas Manuales","V\xe1lvulas de Control"],this.controlOptions=["","Actuador Neum\xe1tico","Actuador\xa0El\xe9ctrico"],this.solution={type:"",group:"",code:"",scope:"",notes:"",order:0,hoursEquipment:0,totalHours:0,unitValue:0,control:""},this.editSolutionForm=this.formBuilder.group({type:["",r.kI.required],group:["",r.kI.required],code:["",r.kI.required],scope:["",r.kI.required],notes:["",r.kI.required],order:["",[r.kI.required,r.kI.min(1)]],hoursEquipment:["",[r.kI.required,r.kI.min(1)]],totalHours:["",[r.kI.required,r.kI.min(1)]],unitValue:["",[r.kI.required,r.kI.min(1)]],control:["",[]]})}ngOnInit(){this.route.params.subscribe(o=>{this.id=o.id,this.getSolution(this.id)})}getSolution(o){this.solutionsService.getServicesById(o).then(n=>{this.solution=n,this.editSolutionForm.patchValue({type:this.solution.type,group:this.solution.group,code:this.solution.code,scope:this.solution.scope,notes:this.solution.notes,order:this.solution.order,hoursEquipment:this.solution.hoursEquipment,totalHours:this.solution.totalHours,unitValue:this.solution.unitValue,control:this.solution.control})}).catch(n=>{console.error(n)})}onSubmit(){if(this.editSolutionForm.valid){let o=this.editSolutionForm.get("unitValue")?.value?.toString().replace(/[,.]/g,"");this.solutionsService.editService({...this.editSolutionForm.value,unitValue:o},this.id).then(n=>{_().fire({title:"\xa1\xc9xito!",text:"Servicio actualizado",icon:"success",confirmButtonText:"Ok"})}).catch(n=>{_().fire("Error","Ocurri\xf3 un error inesperado","error")})}else this.markFormGroupTouched(this.editSolutionForm)}markFormGroupTouched(o){Object.values(o.controls).forEach(n=>{n.markAsTouched(),n instanceof r.cw&&this.markFormGroupTouched(n)})}formatInputValue(o){const n=o.target,s=n.value.replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");n.value=s}formatValue(o){return null==o?"":String(o).replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz),t.Y36(r.qu))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-services"]],decls:56,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","group",1,"form-label"],["type","text","id","group","formControlName","group",1,"form-control"],["class","text-danger",4,"ngIf"],["for","type",1,"form-label"],["id","type","formControlName","type",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code",1,"form-control"],["for","scope",1,"form-label"],["id","scope","formControlName","scope","rows","4",1,"form-control"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2",1,"form-control"],["for","order",1,"form-label"],["type","number","id","order","formControlName","order","min","1",1,"form-control"],["class","mb-3",4,"ngIf"],["for","hoursEquipment",1,"form-label"],["type","number","id","hoursEquipment","formControlName","hoursEquipment","min","1",1,"form-control"],["for","totalHours",1,"form-label"],["type","number","id","totalHours","formControlName","totalHours","min","1",1,"form-control"],["for","unitValue",1,"form-label"],["type","text","id","unitValue","formControlName","unitValue","min","1",1,"form-control",3,"value","input"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"],[3,"value"],["for","control",1,"form-label"],["id","control","formControlName","control",1,"form-select"]],template:function(n,i){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Group"),t.qZA(),t._UZ(7,"input",6),t.YNc(8,k,2,0,"div",7),t.qZA(),t.TgZ(9,"div",4)(10,"label",8),t._uU(11,"Type"),t.qZA(),t.TgZ(12,"select",9),t.YNc(13,N,2,2,"option",10),t.qZA(),t.YNc(14,E,2,0,"div",7),t.qZA(),t.TgZ(15,"div",4)(16,"label",11),t._uU(17,"Code"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,J,2,0,"div",7),t.qZA(),t.TgZ(20,"div",4)(21,"label",13),t._uU(22,"Scope"),t.qZA(),t._UZ(23,"textarea",14),t.YNc(24,w,2,0,"div",7),t.qZA(),t.TgZ(25,"div",4)(26,"label",15),t._uU(27,"Notes"),t.qZA(),t._UZ(28,"textarea",16),t.YNc(29,I,2,0,"div",7),t.qZA()(),t.TgZ(30,"div",3)(31,"div",4)(32,"label",17),t._uU(33,"Order"),t.qZA(),t._UZ(34,"input",18),t.YNc(35,O,2,0,"div",7),t.qZA(),t.YNc(36,Q,6,2,"div",19),t.TgZ(37,"div",4)(38,"label",20),t._uU(39,"Hours Equipment"),t.qZA(),t._UZ(40,"input",21),t.YNc(41,H,2,0,"div",7),t.qZA(),t.TgZ(42,"div",4)(43,"label",22),t._uU(44,"Total Hours"),t.qZA(),t._UZ(45,"input",23),t.YNc(46,B,2,0,"div",7),t.qZA(),t.TgZ(47,"div",4)(48,"label",24),t._uU(49,"Unit Value"),t.qZA(),t.TgZ(50,"input",25),t.NdJ("input",function(s){return i.formatInputValue(s)}),t.qZA(),t.YNc(51,j,2,0,"div",7),t.qZA()()(),t.TgZ(52,"div",2)(53,"div",26)(54,"button",27),t._uU(55,"Guardar"),t.qZA()()()()()),2&n){let l,s,d,p,m,Z,C,g,f,q,h;t.Q6J("formGroup",i.editSolutionForm),t.xp6(8),t.Q6J("ngIf",(null==(l=i.editSolutionForm.get("group"))?null:l.invalid)&&(null==(l=i.editSolutionForm.get("group"))?null:l.touched)),t.xp6(5),t.Q6J("ngForOf",i.typeOptions),t.xp6(1),t.Q6J("ngIf",(null==(s=i.editSolutionForm.get("type"))?null:s.invalid)&&(null==(s=i.editSolutionForm.get("type"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=i.editSolutionForm.get("code"))?null:d.invalid)&&(null==(d=i.editSolutionForm.get("code"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=i.editSolutionForm.get("scope"))?null:p.invalid)&&(null==(p=i.editSolutionForm.get("scope"))?null:p.touched)),t.xp6(5),t.Q6J("ngIf",(null==(m=i.editSolutionForm.get("notes"))?null:m.invalid)&&(null==(m=i.editSolutionForm.get("notes"))?null:m.touched)),t.xp6(6),t.Q6J("ngIf",(null==(Z=i.editSolutionForm.get("order"))?null:Z.invalid)&&(null==(Z=i.editSolutionForm.get("order"))?null:Z.touched)),t.xp6(1),t.Q6J("ngIf","V\xe1lvulas de Control"===(null==(C=i.editSolutionForm.get("type"))?null:C.value)),t.xp6(5),t.Q6J("ngIf",(null==(g=i.editSolutionForm.get("hoursEquipment"))?null:g.invalid)&&(null==(g=i.editSolutionForm.get("hoursEquipment"))?null:g.touched)),t.xp6(5),t.Q6J("ngIf",(null==(f=i.editSolutionForm.get("totalHours"))?null:f.invalid)&&(null==(f=i.editSolutionForm.get("totalHours"))?null:f.touched)),t.xp6(4),t.Q6J("value",i.formatValue(null==(q=i.editSolutionForm.get("unitValue"))?null:q.value)),t.xp6(1),t.Q6J("ngIf",(null==(h=i.editSolutionForm.get("unitValue"))?null:h.invalid)&&(null==(h=i.editSolutionForm.get("unitValue"))?null:h.touched))}},dependencies:[v.sg,v.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.qQ,r.sg,r.u],styles:["label[_ngcontent-%COMP%]{font-weight:700}"]})}return e})();function G(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function P(e,u){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=u.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function R(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function z(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function $(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function X(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function D(e,u){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=u.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function K(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function W(e,u){if(1&e&&(t.TgZ(0,"div",4)(1,"label",30),t._uU(2,"Control"),t.qZA(),t.TgZ(3,"select",31),t.YNc(4,D,2,2,"option",10),t.qZA(),t.YNc(5,K,2,0,"div",7),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(4),t.Q6J("ngForOf",o.controlOptions),t.xp6(1),t.Q6J("ngIf",(null==(n=o.createSolutionForm.get("control"))?null:n.invalid)&&(null==(n=o.createSolutionForm.get("control"))?null:n.touched))}}function tt(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function ot(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function et(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function nt(e,u){1&e&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}let S=(()=>{class e{constructor(o,n,i,l){this.formBuilder=o,this.solutionsService=n,this.router=i,this.route=l,this.group="",this.type="",this.code="",this.control="",this.typeOptions=["Valvulas de seguridad","V\xe1lvulas Manuales","V\xe1lvulas de Control"],this.controlOptions=["Actuador Neum\xe1tico","Actuador\xa0El\xe9ctrico"],this.createSolutionForm=this.formBuilder.group({group:["Valves",r.kI.required],type:["",r.kI.required],code:["",r.kI.required],scope:["",r.kI.required],notes:["",r.kI.required],order:["",[r.kI.required,r.kI.min(1)]],hoursEquipment:["",[r.kI.required,r.kI.min(1)]],totalHours:["",[r.kI.required,r.kI.min(1)]],unitValue:["",[r.kI.required,r.kI.min(1)]],control:[""]},{validators:this.customValidator.bind(this)})}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group||null,this.type=o.type||null,this.code=o.code||null,this.control=o.control||"",this.createSolutionForm.patchValue({group:this.group,scope:"a valvula manuales de:",notes:"1- No se incluye repuestos ni maquinado de partes.",order:1,type:this.typeOptions.includes(o.type)?o.type:this.typeOptions[0],code:this.code?this.code:"",control:this.control?this.control:""})})}customValidator(o){const n=o.get("type"),i=o.get("control");n&&n.value&&i&&i.setErrors("V\xe1lvulas de Control"!==n.value||i.value?null:{required:!0})}onSubmit(){if(this.createSolutionForm.valid){let o=this.createSolutionForm.get("unitValue")?.value?.toString().replace(/[,.]/g,"");this.solutionsService.createService({...this.createSolutionForm.value,unitValue:o}).then(n=>{_().fire({title:"\xa1\xc9xito!",text:"Servicio creado",icon:"success",confirmButtonText:"Ok"}).then(()=>{window.history.back()})}).catch(n=>{_().fire("Error","Ocurri\xf3 un error inesperado","error")})}else this.markFormGroupTouched(this.createSolutionForm)}markFormGroupTouched(o){Object.values(o.controls).forEach(n=>{n.markAsTouched(),n instanceof r.cw&&this.markFormGroupTouched(n)})}formatInputValue(o){const n=o.target,s=n.value.replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");n.value=s}formatValue(o){return null==o?"":String(o).replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(T.h),t.Y36(c.F0),t.Y36(c.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-solution"]],decls:57,vars:14,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","group",1,"form-label"],["type","text","id","group","formControlName","group",1,"form-control",3,"disabled"],["class","text-danger",4,"ngIf"],["for","type",1,"form-label"],["id","type","formControlName","type",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","scope",1,"form-label"],["id","scope","formControlName","scope","rows","4",1,"form-control"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2",1,"form-control"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code","min","1",1,"form-control"],["class","mb-3",4,"ngIf"],["for","order",1,"form-label"],["type","number","id","order","formControlName","order","min","1",1,"form-control"],["for","hoursEquipment",1,"form-label"],["type","number","id","hoursEquipment","formControlName","hoursEquipment","min","1",1,"form-control"],["for","totalHours",1,"form-label"],["type","number","id","totalHours","formControlName","totalHours","min","1",1,"form-control"],["for","unitValue",1,"form-label"],["type","text","id","unitValue","formControlName","unitValue","min","1",1,"form-control",3,"value","input"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"],[3,"value"],["for","control",1,"form-label"],["id","control","formControlName","control",1,"form-select"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7,"Group"),t.qZA(),t._UZ(8,"input",6),t.YNc(9,G,2,0,"div",7),t.qZA(),t.TgZ(10,"div",4)(11,"label",8),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"select",9),t.YNc(14,P,2,2,"option",10),t.qZA(),t.YNc(15,R,2,0,"div",7),t.qZA(),t.TgZ(16,"div",4)(17,"label",11),t._uU(18,"Scope"),t.qZA(),t._UZ(19,"textarea",12),t.YNc(20,z,2,0,"div",7),t.qZA(),t.TgZ(21,"div",4)(22,"label",13),t._uU(23,"Notes"),t.qZA(),t._UZ(24,"textarea",14),t.YNc(25,$,2,0,"div",7),t.qZA()(),t.TgZ(26,"div",3)(27,"div",4)(28,"label",15),t._uU(29,"Code"),t.qZA(),t._UZ(30,"input",16),t.YNc(31,X,2,0,"div",7),t.qZA(),t.YNc(32,W,6,2,"div",17),t.TgZ(33,"div",4)(34,"label",18),t._uU(35,"Order"),t.qZA(),t._UZ(36,"input",19),t.YNc(37,tt,2,0,"div",7),t.qZA(),t.TgZ(38,"div",4)(39,"label",20),t._uU(40,"Hours Equipment"),t.qZA(),t._UZ(41,"input",21),t.YNc(42,ot,2,0,"div",7),t.qZA(),t.TgZ(43,"div",4)(44,"label",22),t._uU(45,"Total Hours"),t.qZA(),t._UZ(46,"input",23),t.YNc(47,et,2,0,"div",7),t.qZA(),t.TgZ(48,"div",4)(49,"label",24),t._uU(50,"Unit Value"),t.qZA(),t.TgZ(51,"input",25),t.NdJ("input",function(s){return i.formatInputValue(s)}),t.qZA(),t.YNc(52,nt,2,0,"div",7),t.qZA()()(),t.TgZ(53,"div",2)(54,"div",26)(55,"button",27),t._uU(56,"Crear"),t.qZA()()()()()()),2&n){let l,s,d,p,m,Z,C,g,f,q,h;t.xp6(1),t.Q6J("formGroup",i.createSolutionForm),t.xp6(7),t.Q6J("disabled",!0),t.xp6(1),t.Q6J("ngIf",(null==(l=i.createSolutionForm.get("group"))?null:l.invalid)&&(null==(l=i.createSolutionForm.get("group"))?null:l.touched)),t.xp6(5),t.Q6J("ngForOf",i.typeOptions),t.xp6(1),t.Q6J("ngIf",(null==(s=i.createSolutionForm.get("type"))?null:s.invalid)&&(null==(s=i.createSolutionForm.get("type"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=i.createSolutionForm.get("scope"))?null:d.invalid)&&(null==(d=i.createSolutionForm.get("scope"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=i.createSolutionForm.get("notes"))?null:p.invalid)&&(null==(p=i.createSolutionForm.get("notes"))?null:p.touched)),t.xp6(6),t.Q6J("ngIf",(null==(m=i.createSolutionForm.get("code"))?null:m.invalid)&&(null==(m=i.createSolutionForm.get("code"))?null:m.touched)),t.xp6(1),t.Q6J("ngIf","V\xe1lvulas de Control"===(null==(Z=i.createSolutionForm.get("type"))?null:Z.value)),t.xp6(5),t.Q6J("ngIf",(null==(C=i.createSolutionForm.get("order"))?null:C.invalid)&&(null==(C=i.createSolutionForm.get("order"))?null:C.touched)),t.xp6(5),t.Q6J("ngIf",(null==(g=i.createSolutionForm.get("hoursEquipment"))?null:g.invalid)&&(null==(g=i.createSolutionForm.get("hoursEquipment"))?null:g.touched)),t.xp6(5),t.Q6J("ngIf",(null==(f=i.createSolutionForm.get("totalHours"))?null:f.invalid)&&(null==(f=i.createSolutionForm.get("totalHours"))?null:f.touched)),t.xp6(4),t.Q6J("value",i.formatValue(null==(q=i.createSolutionForm.get("unitValue"))?null:q.value)),t.xp6(1),t.Q6J("ngIf",(null==(h=i.createSolutionForm.get("unitValue"))?null:h.invalid)&&(null==(h=i.createSolutionForm.get("unitValue"))?null:h.touched))}},dependencies:[v.sg,v.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.qQ,r.sg,r.u],styles:["label[_ngcontent-%COMP%]{font-weight:700}"]})}return e})(),it=(()=>{class e{constructor(){this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.groups=[]}goTypes(o){this.router.navigate("Valves"===o?["dashboard/solutions/types","Valves"]:["dashboard/laboratory"])}static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-group"]],decls:10,vars:0,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"list-type","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Grupos primarios"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.NdJ("click",function(){return i.goTypes("Laboratory")}),t.TgZ(5,"span"),t._uU(6,"Laboratorio"),t.qZA()(),t.TgZ(7,"div",3),t.NdJ("click",function(){return i.goTypes("Valves")}),t.TgZ(8,"span"),t._uU(9,"Valvulas"),t.qZA()()()())},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.list-type[_ngcontent-%COMP%]{flex-wrap:wrap}"]})}return e})();function rt(e,u){if(1&e){const o=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.goServices(l))}),t.TgZ(1,"span"),t._uU(2),t.qZA()()}if(2&e){const o=u.$implicit;t.xp6(2),t.Oqu(o)}}let A=(()=>{class e{constructor(o){this.route=o,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.type="",this.group="",this.control="",this.codes=[]}ngOnInit(){this.route.params.subscribe(o=>{this.group=o.group,this.type=o.type,this.control=o.control,this.getCodes(this.type,this.control)})}getCodes(o,n){this.solutionsService.getCodesByGroupsAndTypes(this.group,o,n).then(i=>{this.codes=[...i]}).catch(i=>{console.error(i)})}goServices(o){this.router.navigate(this.control?["dashboard/solutions/control","Valves","V\xe1lvulas de Control",o,this.control]:["dashboard/solutions/codes",this.group,this.type,o])}create(){this.router.navigate(this.control?["dashboard/solutions/service-control","Valves","V\xe1lvulas de Control",this.control]:["dashboard/solutions/services-create",this.group,this.type])}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-codes"]],decls:8,vars:3,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],["class","group-type-gradient text-center",3,"click",4,"ngFor","ngForOf"],[1,"group-type-gradient","text-center",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return i.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,rt,3,1,"div",5),t.qZA()()),2&n&&(t.xp6(2),t.AsE("Servicios de ",i.group," ",i.type,""),t.xp6(5),t.Q6J("ngForOf",i.codes))},dependencies:[v.sg],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#1e64af;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#4a00e0,#8e2de2);border-color:#fff;color:#fff}"]})}return e})();const lt=[{path:"",component:it},{path:"types/:group",component:V},{path:"control",component:(()=>{class e{constructor(o,n){this.router=o,this.route=n,this.codes=[],this.type="",this.group="",this.control=""}ngOnInit(){}goCodes(o){this.router.navigate(["dashboard/solutions/control","Valves","V\xe1lvulas de Control",o])}create(){this.router.navigate(["dashboard/solutions/services-create","Valves","V\xe1lvulas de Control"])}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(c.F0),t.Y36(c.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-v-control-admin"]],decls:13,vars:0,consts:[[1,"container"],[1,"text-center","mb-3"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center","types-content","d-flex","justify-content-center","align-items-center",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Servicios de Valvulas de control"),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return i.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return i.goCodes("Actuador Neum\xe1tico")}),t.TgZ(8,"span"),t._uU(9,"Actuador Neum\xe1tico"),t.qZA()(),t.TgZ(10,"div",5),t.NdJ("click",function(){return i.goCodes("Actuador\xa0El\xe9ctrico")}),t.TgZ(11,"span"),t._uU(12,"Actuador\xa0El\xe9ctrico"),t.qZA()()()())},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#1e64af}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#1e64af;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#4a00e0,#8e2de2);border-color:#fff;color:#fff}.types-content[_ngcontent-%COMP%]{height:210px}"]})}return e})()},{path:"control/:group/:type/:control",component:A},{path:"control/:group/:type/:code/:control",component:b},{path:"codes/:group/:type",component:A},{path:"codes/:group/:type/:code",component:b},{path:"services-edit/:id",component:L},{path:"services-create/:group",component:S},{path:"services-create/:group/:type",component:S,pathMatch:"full"},{path:"services-create/:group/:type/:code",component:S,pathMatch:"full"},{path:"service-control/:group/:type/:control",component:S,pathMatch:"full"},{path:"service-control/:group/:type/:control/:code",component:S,pathMatch:"full"}];let ut=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(lt),c.Bz]})}return e})(),st=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[v.ez,F.JF,r.u5,r.UX,ut]})}return e})()}}]);