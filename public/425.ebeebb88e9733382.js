"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[425],{2425:(lt,y,a)=>{a.r(y),a.d(y,{SolutionsModule:()=>rt});var Z=a(6814),F=a(9862),r=a(95),c=a(5476),t=a(4769),T=a(9989);let U=(()=>{class n{constructor(e){this.route=e,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.group="",this.types=[]}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group,this.getServices(this.group)})}getServices(e){this.solutionsService.getByType(e).then(i=>{this.types=[...i]}).catch(i=>{console.error(i)})}goCodes(e){this.router.navigate(["dashboard/solutions/codes",this.group,e])}goControl(){this.router.navigate(["dashboard/solutions/control"])}create(){this.router.navigate(["dashboard/solutions/services-create",this.group])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-type-solutions"]],decls:16,vars:1,consts:[[1,"container"],[1,"text-center","mb-3","pt-5"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center","types-content","d-flex","justify-content-center","align-items-center",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return o.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return o.goCodes("Valvulas de seguridad")}),t.TgZ(8,"span"),t._uU(9,"Valvulas de seguridad"),t.qZA()(),t.TgZ(10,"div",5),t.NdJ("click",function(){return o.goCodes("V\xe1lvulas Manuales")}),t.TgZ(11,"span"),t._uU(12,"V\xe1lvulas Manuales"),t.qZA()(),t.TgZ(13,"div",5),t.NdJ("click",function(){return o.goControl()}),t.TgZ(14,"span"),t._uU(15,"V\xe1lvulas de Control"),t.qZA()()()()),2&i&&(t.xp6(2),t.hij("Servicios de ",o.group,""))},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#fff}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#f74149;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:#d3555b;color:#fff}.types-content[_ngcontent-%COMP%]{height:210px}"]})}return n})();var x=a(3519),_=a.n(x);function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",4)(5,"div",8)(6,"strong"),t._uU(7,"Order:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div",8)(10,"strong"),t._uU(11,"Total Hours:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div",8)(14,"strong"),t._uU(15,"Unit Value:"),t.qZA(),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",8)(19,"strong"),t._uU(20,"Hours Equipment:"),t.qZA(),t._uU(21),t.qZA()(),t.TgZ(22,"div",9)(23,"div",10)(24,"strong"),t._uU(25,"Scope:"),t.qZA(),t._uU(26),t.qZA()(),t.TgZ(27,"div",11)(28,"div",12)(29,"div",13),t.O4$(),t.TgZ(30,"svg",14),t.NdJ("click",function(){const l=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.goEdit(l._id))}),t._UZ(31,"path",15)(32,"path",16),t.qZA()(),t.kcU(),t.TgZ(33,"div",13),t.O4$(),t.TgZ(34,"svg",17),t.NdJ("click",function(){const l=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteSolution(l._id))}),t._UZ(35,"path",18)(36,"path",19),t.qZA()()()()()()()()}if(2&n){const e=s.$implicit;t.xp6(8),t.hij(" ",e.order," "),t.xp6(4),t.hij(" ",e.totalHours," "),t.xp6(4),t.hij(" ",t.xi3(17,5,e.unitValue,"1.0-0")," "),t.xp6(5),t.hij(" ",e.hoursEquipment," "),t.xp6(5),t.hij(" ",e.scope," ")}}let A=(()=>{class n{constructor(e){this.route=e,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.group="",this.type="",this.code="",this.control="",this.groupServices=[]}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group,this.type=e.type,this.code=e.code,this.control=e.control,this.getServicesByType(this.group,this.type,this.code,this.control)})}goEdit(e){this.router.navigate(["dashboard/solutions/services-edit",e])}deleteSolution(e){_().fire({title:"\xbfEst\xe1s seguro?",text:"\xa1No podr\xe1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, borrarlo!",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.solutionsService.deleteSolution(e).then(()=>{_().fire("Borrado!","\xa1Tu soluci\xf3n ha sido eliminada.","success").then(()=>{this.getServicesByType(this.group,this.type,this.code,this.control)})}).catch(o=>{_().fire("Error!","Ha ocurrido un error al intentar borrar la soluci\xf3n.","error"),console.error(o)})})}getServicesByType(e,i,o,l){this.solutionsService.getServicesByGroupTypeAndCode(e,i,o,l).then(u=>{this.groupServices=[...u]}).catch(u=>{console.error(u)})}create(){this.router.navigate(this.control?["dashboard/solutions/service-control","Valves","V\xe1lvulas de Control",this.control,this.code]:["dashboard/solutions/services-create",this.group,this.type,this.code])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-solutions"]],decls:7,vars:2,consts:[[1,"container","list-solutions","pt-5"],[1,"text-center","mb-3"],[1,"btn","text-center",3,"click"],["class","row ",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","mb-3"],[1,"card"],[1,"card-body"],[1,"col-md-3"],[1,"row","mt-2"],[1,"col-md-12"],[1,"row","mt-2","text-center"],[1,"d-flex","justify-content-center"],[1,"p-1"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#1e64af","viewBox","0 0 16 16",1,"bi","bi-pencil-square",3,"click"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","#d82518","viewBox","0 0 16 16",1,"bi","bi-trash",3,"click"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return o.create()}),t._uU(5,"Crear"),t.qZA()(),t.YNc(6,k,37,8,"div",3),t.qZA()),2&i&&(t.xp6(2),t.hij("Servicios (",o.type,")"),t.xp6(4),t.Q6J("ngForOf",o.groupServices))},dependencies:[Z.sg,Z.JJ],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#fff}svg[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{background:#f74149;color:#fff;font-weight:700;height:50px;width:200px}.btn[_ngcontent-%COMP%]:hover{background:#f74149;border-color:#fff;color:#fff}"]})}return n})();var q=a(9317);function M(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function w(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function N(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function E(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function J(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function I(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function O(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido "),t.qZA())}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"label",29),t._uU(2,"Control"),t.qZA(),t.TgZ(3,"ng-select",30),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedControl=o)}),t.qZA(),t.YNc(4,O,2,0,"div",8),t.qZA()}if(2&n){const e=t.oxw();let i;t.xp6(3),t.Q6J("items",e.controlOptions)("ngModel",e.selectedControl),t.xp6(1),t.Q6J("ngIf",(null==(i=e.editSolutionForm.get("control"))?null:i.invalid)&&(null==(i=e.editSolutionForm.get("control"))?null:i.touched))}}function Q(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function H(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido o minimo 1 "),t.qZA())}function B(n,s){1&n&&(t.TgZ(0,"div",28),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}let L=(()=>{class n{constructor(e,i){this.route=e,this.formBuilder=i,this.id="",this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.typeOptions=["Valvulas de seguridad","V\xe1lvulas Manuales","V\xe1lvulas de Control"],this.controlOptions=["","Actuador Neum\xe1tico","Actuador\xa0El\xe9ctrico"],this.solution={type:"",group:"",code:"",scope:"",notes:"",order:0,hoursEquipment:0,totalHours:0,unitValue:0,control:""},this.editSolutionForm=this.formBuilder.group({type:["",r.kI.required],group:["",r.kI.required],code:["",r.kI.required],scope:["",r.kI.required],notes:["",r.kI.required],order:["",[r.kI.required,r.kI.min(1)]],hoursEquipment:["",[r.kI.required,r.kI.min(1)]],totalHours:["",[r.kI.required,r.kI.min(1)]],unitValue:["",[r.kI.required,r.kI.min(1)]],control:["",[]]})}ngOnInit(){this.route.params.subscribe(e=>{this.id=e.id,this.getSolution(this.id)})}getSolution(e){this.solutionsService.getServicesById(e).then(i=>{this.solution=i,this.editSolutionForm.patchValue({type:this.solution.type,group:this.solution.group,code:this.solution.code,scope:this.solution.scope,notes:this.solution.notes,order:this.solution.order,hoursEquipment:this.solution.hoursEquipment,totalHours:this.solution.totalHours,unitValue:this.solution.unitValue,control:this.solution.control}),this.selectedControl=this.solution.control}).catch(i=>{console.error(i)})}onSubmit(){if(this.editSolutionForm.valid){let e=this.editSolutionForm.get("unitValue")?.value?.toString().replace(/[,.]/g,"");this.solutionsService.editService({...this.editSolutionForm.value,unitValue:e},this.id).then(i=>{_().fire({title:"\xa1\xc9xito!",text:"Servicio actualizado",icon:"success",confirmButtonText:"Ok"})}).catch(i=>{_().fire("Error","Ocurri\xf3 un error inesperado","error")})}else this.markFormGroupTouched(this.editSolutionForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(i=>{i.markAsTouched(),i instanceof r.cw&&this.markFormGroupTouched(i)})}formatInputValue(e){const i=e.target,u=i.value.replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");i.value=u}formatValue(e){return null==e?"":String(e).replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.gz),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-services"]],decls:57,vars:14,consts:[[1,"pt-5",3,"formGroup","ngSubmit"],[1,"text-center","text-white"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","group",1,"form-label"],["type","text","id","group","formControlName","group",1,"form-control","custom-input-internal"],["class","text-required",4,"ngIf"],["for","type",1,"form-label"],["bindLabel","name","placeholder","Select type","formControlName","type","id","type",3,"items","ngModel","ngModelChange"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code",1,"form-control","custom-input-internal"],["for","scope",1,"form-label"],["id","scope","formControlName","scope","rows","4",1,"form-control","custom-input-internal"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2",1,"form-control","custom-input-internal"],["for","order",1,"form-label"],["type","number","id","order","formControlName","order","min","1",1,"form-control","custom-input-internal"],["class","mb-3",4,"ngIf"],["for","hoursEquipment",1,"form-label"],["type","number","id","hoursEquipment","formControlName","hoursEquipment","min","1",1,"form-control","custom-input-internal"],["for","totalHours",1,"form-label"],["type","number","id","totalHours","formControlName","totalHours","min","1",1,"form-control","custom-input-internal"],["for","unitValue",1,"form-label"],["type","text","id","unitValue","formControlName","unitValue","min","1",1,"form-control","custom-input-internal",3,"value","input"],[1,"col-12"],["type","submit",1,"btn","btn-submit"],[1,"text-required"],["for","control",1,"form-label"],["id","control","bindLabel","name","placeholder","Select control","formControlName","control",3,"items","ngModel","ngModelChange"]],template:function(i,o){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"h1",1),t._uU(2,"Editar Servicios"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),t._uU(8,"Group"),t.qZA(),t._UZ(9,"input",7),t.YNc(10,M,2,0,"div",8),t.qZA(),t.TgZ(11,"div",5)(12,"label",9),t._uU(13,"Type"),t.qZA(),t.TgZ(14,"ng-select",10),t.NdJ("ngModelChange",function(u){return o.selectedType=u}),t.qZA(),t.YNc(15,w,2,0,"div",8),t.qZA(),t.TgZ(16,"div",5)(17,"label",11),t._uU(18,"Code"),t.qZA(),t._UZ(19,"input",12),t.YNc(20,N,2,0,"div",8),t.qZA(),t.TgZ(21,"div",5)(22,"label",13),t._uU(23,"Scope"),t.qZA(),t._UZ(24,"textarea",14),t.YNc(25,E,2,0,"div",8),t.qZA(),t.TgZ(26,"div",5)(27,"label",15),t._uU(28,"Notes"),t.qZA(),t._UZ(29,"textarea",16),t.YNc(30,J,2,0,"div",8),t.qZA()(),t.TgZ(31,"div",4)(32,"div",5)(33,"label",17),t._uU(34,"Order"),t.qZA(),t._UZ(35,"input",18),t.YNc(36,I,2,0,"div",8),t.qZA(),t.YNc(37,Y,5,3,"div",19),t.TgZ(38,"div",5)(39,"label",20),t._uU(40,"Hours Equipment"),t.qZA(),t._UZ(41,"input",21),t.YNc(42,Q,2,0,"div",8),t.qZA(),t.TgZ(43,"div",5)(44,"label",22),t._uU(45,"Total Hours"),t.qZA(),t._UZ(46,"input",23),t.YNc(47,H,2,0,"div",8),t.qZA(),t.TgZ(48,"div",5)(49,"label",24),t._uU(50,"Unit Value"),t.qZA(),t.TgZ(51,"input",25),t.NdJ("input",function(u){return o.formatInputValue(u)}),t.qZA(),t.YNc(52,B,2,0,"div",8),t.qZA()()(),t.TgZ(53,"div",3)(54,"div",26)(55,"button",27),t._uU(56,"Guardar"),t.qZA()()()()()),2&i){let l,u,d,p,m,v,C,g,h,b,f;t.Q6J("formGroup",o.editSolutionForm),t.xp6(10),t.Q6J("ngIf",(null==(l=o.editSolutionForm.get("group"))?null:l.invalid)&&(null==(l=o.editSolutionForm.get("group"))?null:l.touched)),t.xp6(4),t.Q6J("items",o.typeOptions)("ngModel",o.selectedType),t.xp6(1),t.Q6J("ngIf",(null==(u=o.editSolutionForm.get("type"))?null:u.invalid)&&(null==(u=o.editSolutionForm.get("type"))?null:u.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=o.editSolutionForm.get("code"))?null:d.invalid)&&(null==(d=o.editSolutionForm.get("code"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=o.editSolutionForm.get("scope"))?null:p.invalid)&&(null==(p=o.editSolutionForm.get("scope"))?null:p.touched)),t.xp6(5),t.Q6J("ngIf",(null==(m=o.editSolutionForm.get("notes"))?null:m.invalid)&&(null==(m=o.editSolutionForm.get("notes"))?null:m.touched)),t.xp6(6),t.Q6J("ngIf",(null==(v=o.editSolutionForm.get("order"))?null:v.invalid)&&(null==(v=o.editSolutionForm.get("order"))?null:v.touched)),t.xp6(1),t.Q6J("ngIf","V\xe1lvulas de Control"===(null==(C=o.editSolutionForm.get("type"))?null:C.value)),t.xp6(5),t.Q6J("ngIf",(null==(g=o.editSolutionForm.get("hoursEquipment"))?null:g.invalid)&&(null==(g=o.editSolutionForm.get("hoursEquipment"))?null:g.touched)),t.xp6(5),t.Q6J("ngIf",(null==(h=o.editSolutionForm.get("totalHours"))?null:h.invalid)&&(null==(h=o.editSolutionForm.get("totalHours"))?null:h.touched)),t.xp6(4),t.Q6J("value",o.formatValue(null==(b=o.editSolutionForm.get("unitValue"))?null:b.value)),t.xp6(1),t.Q6J("ngIf",(null==(f=o.editSolutionForm.get("unitValue"))?null:f.invalid)&&(null==(f=o.editSolutionForm.get("unitValue"))?null:f.touched))}},dependencies:[Z.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,q.w9],styles:["label[_ngcontent-%COMP%]{font-weight:700}.form-label[_ngcontent-%COMP%]{color:#fff}.btn-submit[_ngcontent-%COMP%]{background-color:#f74149;color:#fff;font-weight:700;width:200px}"]})}return n})();function P(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function G(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function R(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function j(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function z(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function X(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido "),t.qZA())}function $(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"label",30),t._uU(2,"Control"),t.qZA(),t.TgZ(3,"ng-select",31),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedControl=o)}),t.qZA(),t.YNc(4,X,2,0,"div",9),t.qZA()}if(2&n){const e=t.oxw();let i;t.xp6(3),t.Q6J("items",e.controlOptions)("ngModel",e.selectedControl),t.xp6(1),t.Q6J("ngIf",(null==(i=e.createSolutionForm.get("control"))?null:i.invalid)&&(null==(i=e.createSolutionForm.get("control"))?null:i.touched))}}function D(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function K(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function W(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}function tt(n,s){1&n&&(t.TgZ(0,"div",29),t._uU(1," Requerido o m\xednimo 1 "),t.qZA())}let S=(()=>{class n{constructor(e,i,o,l){this.formBuilder=e,this.solutionsService=i,this.router=o,this.route=l,this.group="",this.type="",this.code="",this.control="",this.typeOptions=["Valvulas de seguridad","V\xe1lvulas Manuales","V\xe1lvulas de Control"],this.controlOptions=["Actuador Neum\xe1tico","Actuador\xa0El\xe9ctrico"],this.createSolutionForm=this.formBuilder.group({group:["Valves",r.kI.required],type:["",r.kI.required],code:["",r.kI.required],scope:["",r.kI.required],notes:["",r.kI.required],order:["",[r.kI.required,r.kI.min(1)]],hoursEquipment:["",[r.kI.required,r.kI.min(1)]],totalHours:["",[r.kI.required,r.kI.min(1)]],unitValue:["",[r.kI.required,r.kI.min(1)]],control:[""]},{validators:this.customValidator.bind(this)})}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group||null,this.type=e.type||null,this.code=e.code||null,this.control=e.control||"",this.createSolutionForm.patchValue({group:this.group,scope:"a valvula manuales de:",notes:"1- No se incluye repuestos ni maquinado de partes.",order:1,type:this.typeOptions.includes(e.type)?e.type:this.typeOptions[0],code:this.code?this.code:"",control:this.control?this.control:""})})}debugHover(e){}customValidator(e){const i=e.get("type"),o=e.get("control");i&&i.value&&o&&o.setErrors("V\xe1lvulas de Control"!==i.value||o.value?null:{required:!0})}onSubmit(){if(console.log(this.createSolutionForm.value),this.createSolutionForm.valid){let e=this.createSolutionForm.get("unitValue")?.value?.toString().replace(/[,.]/g,"");this.solutionsService.createService({...this.createSolutionForm.value,unitValue:e}).then(i=>{_().fire({title:"\xa1\xc9xito!",text:"Servicio creado",icon:"success",confirmButtonText:"Ok"}).then(()=>{window.history.back()})}).catch(i=>{_().fire("Error","Ocurri\xf3 un error inesperado","error")})}else this.markFormGroupTouched(this.createSolutionForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(i=>{i.markAsTouched(),i instanceof r.cw&&this.markFormGroupTouched(i)})}formatInputValue(e){const i=e.target,u=i.value.replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");i.value=u}formatValue(e){return null==e?"":String(e).replace(/[,.]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(r.qu),t.Y36(T.h),t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-solution"]],decls:58,vars:15,consts:[[1,"container","pt-5"],[1,"text-center","text-white"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","group",1,"form-label"],["type","text","id","group","formControlName","group",1,"form-control","custom-input-internal",3,"disabled"],["class","text-required",4,"ngIf"],["for","type",1,"form-label"],["bindLabel","name","placeholder","Select type","formControlName","type",3,"items","ngModel","ngModelChange"],["for","scope",1,"form-label"],["id","scope","formControlName","scope","rows","4",1,"form-control","custom-input-internal"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2",1,"form-control","custom-input-internal"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code","min","1",1,"form-control","custom-input-internal"],["class","mb-3",4,"ngIf"],["for","order",1,"form-label"],["type","number","id","order","formControlName","order","min","1",1,"form-control","custom-input-internal"],["for","hoursEquipment",1,"form-label"],["type","number","id","hoursEquipment","formControlName","hoursEquipment","min","1",1,"form-control","custom-input-internal"],["for","totalHours",1,"form-label"],["type","number","id","totalHours","formControlName","totalHours","min","1",1,"form-control","custom-input-internal"],["for","unitValue",1,"form-label"],["type","text","id","unitValue","formControlName","unitValue","min","1",1,"form-control","custom-input-internal",3,"value","input"],[1,"col-12"],["type","submit",1,"btn","btn-submit"],[1,"text-required"],["for","control",1,"form-label"],["id","control","bindLabel","name","placeholder","Select control","formControlName","control",3,"items","ngModel","ngModelChange"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Crear Servicios"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Group"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,P,2,0,"div",9),t.qZA(),t.TgZ(12,"div",6)(13,"label",10),t._uU(14,"Type"),t.qZA(),t.TgZ(15,"ng-select",11),t.NdJ("ngModelChange",function(u){return o.selectedType=u}),t.qZA(),t.YNc(16,G,2,0,"div",9),t.qZA(),t.TgZ(17,"div",6)(18,"label",12),t._uU(19,"Scope"),t.qZA(),t._UZ(20,"textarea",13),t.YNc(21,R,2,0,"div",9),t.qZA(),t.TgZ(22,"div",6)(23,"label",14),t._uU(24,"Notes"),t.qZA(),t._UZ(25,"textarea",15),t.YNc(26,j,2,0,"div",9),t.qZA()(),t.TgZ(27,"div",5)(28,"div",6)(29,"label",16),t._uU(30,"Code"),t.qZA(),t._UZ(31,"input",17),t.YNc(32,z,2,0,"div",9),t.qZA(),t.YNc(33,$,5,3,"div",18),t.TgZ(34,"div",6)(35,"label",19),t._uU(36,"Order"),t.qZA(),t._UZ(37,"input",20),t.YNc(38,D,2,0,"div",9),t.qZA(),t.TgZ(39,"div",6)(40,"label",21),t._uU(41,"Hours Equipment"),t.qZA(),t._UZ(42,"input",22),t.YNc(43,K,2,0,"div",9),t.qZA(),t.TgZ(44,"div",6)(45,"label",23),t._uU(46,"Total Hours"),t.qZA(),t._UZ(47,"input",24),t.YNc(48,W,2,0,"div",9),t.qZA(),t.TgZ(49,"div",6)(50,"label",25),t._uU(51,"Unit Value"),t.qZA(),t.TgZ(52,"input",26),t.NdJ("input",function(u){return o.formatInputValue(u)}),t.qZA(),t.YNc(53,tt,2,0,"div",9),t.qZA()()(),t.TgZ(54,"div",4)(55,"div",27)(56,"button",28),t._uU(57,"Crear"),t.qZA()()()()()()),2&i){let l,u,d,p,m,v,C,g,h,b,f;t.xp6(3),t.Q6J("formGroup",o.createSolutionForm),t.xp6(7),t.Q6J("disabled",!0),t.xp6(1),t.Q6J("ngIf",(null==(l=o.createSolutionForm.get("group"))?null:l.invalid)&&(null==(l=o.createSolutionForm.get("group"))?null:l.touched)),t.xp6(4),t.Q6J("items",o.typeOptions)("ngModel",o.selectedType),t.xp6(1),t.Q6J("ngIf",(null==(u=o.createSolutionForm.get("type"))?null:u.invalid)&&(null==(u=o.createSolutionForm.get("type"))?null:u.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=o.createSolutionForm.get("scope"))?null:d.invalid)&&(null==(d=o.createSolutionForm.get("scope"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=o.createSolutionForm.get("notes"))?null:p.invalid)&&(null==(p=o.createSolutionForm.get("notes"))?null:p.touched)),t.xp6(6),t.Q6J("ngIf",(null==(m=o.createSolutionForm.get("code"))?null:m.invalid)&&(null==(m=o.createSolutionForm.get("code"))?null:m.touched)),t.xp6(1),t.Q6J("ngIf","V\xe1lvulas de Control"===(null==(v=o.createSolutionForm.get("type"))?null:v.value)),t.xp6(5),t.Q6J("ngIf",(null==(C=o.createSolutionForm.get("order"))?null:C.invalid)&&(null==(C=o.createSolutionForm.get("order"))?null:C.touched)),t.xp6(5),t.Q6J("ngIf",(null==(g=o.createSolutionForm.get("hoursEquipment"))?null:g.invalid)&&(null==(g=o.createSolutionForm.get("hoursEquipment"))?null:g.touched)),t.xp6(5),t.Q6J("ngIf",(null==(h=o.createSolutionForm.get("totalHours"))?null:h.invalid)&&(null==(h=o.createSolutionForm.get("totalHours"))?null:h.touched)),t.xp6(4),t.Q6J("value",o.formatValue(null==(b=o.createSolutionForm.get("unitValue"))?null:b.value)),t.xp6(1),t.Q6J("ngIf",(null==(f=o.createSolutionForm.get("unitValue"))?null:f.invalid)&&(null==(f=o.createSolutionForm.get("unitValue"))?null:f.touched))}},dependencies:[Z.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,q.w9],styles:["label[_ngcontent-%COMP%]{font-weight:700}.form-label[_ngcontent-%COMP%]{color:#fff}.btn-submit[_ngcontent-%COMP%]{background-color:#f74149;color:#fff;font-weight:700;width:200px}"]})}return n})(),et=(()=>{class n{constructor(){this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.groups=[]}goTypes(e){this.router.navigate("Valves"===e?["dashboard/solutions/types","Valves"]:["dashboard/laboratory"])}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-group"]],decls:11,vars:0,consts:[[1,"list-group","container-fluid"],[1,""],[1,"text-center","mb-3"],[1,"list-type","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Grupos primarios"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.NdJ("click",function(){return o.goTypes("Laboratory")}),t.TgZ(6,"span"),t._uU(7,"Laboratorio"),t.qZA()(),t.TgZ(8,"div",4),t.NdJ("click",function(){return o.goTypes("Valves")}),t.TgZ(9,"span"),t._uU(10,"Valvulas"),t.qZA()()()()())},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding-top:5rem}.list-type[_ngcontent-%COMP%]{flex-wrap:wrap}"]})}return n})();function ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.goServices(l))}),t.TgZ(1,"span"),t._uU(2),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e)}}let V=(()=>{class n{constructor(e){this.route=e,this.solutionsService=(0,t.f3M)(T.h),this.router=(0,t.f3M)(c.F0),this.type="",this.group="",this.control="",this.codes=[]}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group,this.type=e.type,this.control=e.control,this.getCodes(this.type,this.control)})}getCodes(e,i){this.solutionsService.getCodesByGroupsAndTypes(this.group,e,i).then(o=>{this.codes=[...o]}).catch(o=>{console.error(o)})}goServices(e){this.router.navigate(this.control?["dashboard/solutions/control","Valves","V\xe1lvulas de Control",e,this.control]:["dashboard/solutions/codes",this.group,this.type,e])}create(){this.router.navigate(this.control?["dashboard/solutions/service-control","Valves","V\xe1lvulas de Control",this.control]:["dashboard/solutions/services-create",this.group,this.type])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-codes"]],decls:8,vars:3,consts:[[1,"container","pt-5"],[1,"text-center","mb-3"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],["class","group-type-gradient text-center",3,"click",4,"ngFor","ngForOf"],[1,"group-type-gradient","text-center",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return o.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,ot,3,1,"div",5),t.qZA()()),2&i&&(t.xp6(2),t.AsE("Servicios de ",o.group," ",o.type,""),t.xp6(5),t.Q6J("ngForOf",o.codes))},dependencies:[Z.sg],styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#fff}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#f74149;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:#d3555b;border-color:#fff;color:#fff}"]})}return n})();const nt=[{path:"",component:et},{path:"types/:group",component:U},{path:"control",component:(()=>{class n{constructor(e,i){this.router=e,this.route=i,this.codes=[],this.type="",this.group="",this.control=""}ngOnInit(){}goCodes(e){this.router.navigate(["dashboard/solutions/control","Valves","V\xe1lvulas de Control",e])}create(){this.router.navigate(["dashboard/solutions/services-create","Valves","V\xe1lvulas de Control"])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-v-control-admin"]],decls:13,vars:0,consts:[[1,"container","pt-5"],[1,"text-center","mb-3"],[1,"text-center"],[1,"btn","text-center",3,"click"],[1,"type-solutions","d-flex","justify-content-center","align-items-center"],[1,"group-type-gradient","text-center","types-content","d-flex","justify-content-center","align-items-center",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Servicios de Valvulas de control"),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return o.create()}),t._uU(5,"Crear"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return o.goCodes("Actuador Neum\xe1tico")}),t.TgZ(8,"span"),t._uU(9,"Actuador Neum\xe1tico"),t.qZA()(),t.TgZ(10,"div",5),t.NdJ("click",function(){return o.goCodes("Actuador\xa0El\xe9ctrico")}),t.TgZ(11,"span"),t._uU(12,"Actuador\xa0El\xe9ctrico"),t.qZA()()()())},styles:["h2[_ngcontent-%COMP%]{font-weight:700;color:#fff}.type-solutions[_ngcontent-%COMP%]{flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#f74149;color:#fff;font-weight:700;height:50px;width:150px}.btn[_ngcontent-%COMP%]:hover{background:#d3555b;border-color:#fff;color:#fff}.types-content[_ngcontent-%COMP%]{height:210px}"]})}return n})()},{path:"control/:group/:type/:control",component:V},{path:"control/:group/:type/:code/:control",component:A},{path:"codes/:group/:type",component:V},{path:"codes/:group/:type/:code",component:A},{path:"services-edit/:id",component:L},{path:"services-create/:group",component:S},{path:"services-create/:group/:type",component:S,pathMatch:"full"},{path:"services-create/:group/:type/:code",component:S,pathMatch:"full"},{path:"service-control/:group/:type/:control",component:S,pathMatch:"full"},{path:"service-control/:group/:type/:control/:code",component:S,pathMatch:"full"}];let it=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(nt),c.Bz]})}return n})(),rt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[Z.ez,F.JF,r.u5,r.UX,it,q.A0]})}return n})()}}]);