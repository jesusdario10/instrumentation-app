"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[541],{4541:(E,p,l)=>{l.r(p),l.d(p,{HomeModule:()=>I});var m=l(6814),s=l(7664),t=l(4946);let g=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],decls:26,vars:0,consts:[[1,"main","container","pt-5"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/servicios/laboratorio.jpg","alt","lab"],[1,"btn","mt-3"],["routerLink","/home/valves",1,"btn","mt-3"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),t._uU(6,"Laboratorio Metrolog\xedco de Calibraci\xf3n"),t.qZA(),t.TgZ(7,"h5"),t._uU(8,"Caracter\xedsticas"),t.qZA(),t.TgZ(9,"p"),t._uU(10," Laboratorio de Calibracion con trazabilidad metrol\xf3gica (en sitio), en magnitudes de presi\xf3n y temperatura para instrumentos industriales "),t.qZA(),t._UZ(11,"img",5),t.TgZ(12,"button",6),t._uU(13,"ver"),t.qZA()()()(),t.TgZ(14,"div",2)(15,"div",3)(16,"div",4)(17,"h4"),t._uU(18,"Especialidad Insttrumentacion y Valvulas"),t.qZA(),t.TgZ(19,"h5"),t._uU(20,"Caracter\xedsticas"),t.qZA(),t.TgZ(21,"p"),t._uU(22," Mantenimiento y pruebas a v\xe1lvulas manuales, de control, de seguridad y alivio, bajo est\xe1ndares internacionales "),t.qZA(),t._UZ(23,"img",5),t.TgZ(24,"button",7),t._uU(25,"ver"),t.qZA()()()()()())},dependencies:[s.rH],styles:[".main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return e})();var v=l(9862),f=l(9413),_=l(5619);let h=(()=>{class e{constructor(){this.titleSource=new _.X("Start"),this.currentTitle=this.titleSource.asObservable(),this.baseUrl=f.N.baseUrl,this.http=(0,t.f3M)(v.eN),this.router=(0,t.f3M)(s.F0)}getSolutionsByType(o){return this.http.get(`${this.baseUrl}/api/solutions/by-type/${o}`)}changeTitle(o){this.titleSource.next(o)}createQuotation(o){return this.http.post(`${this.baseUrl}/api/quotation`,o)}static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),C=(()=>{class e{constructor(o,i){this.homeService=o,this.cdr=i,this.title="Start"}ngOnInit(){this.homeService.currentTitle.subscribe(o=>{this.title=o,this.cdr.detectChanges()})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(h),t.Y36(t.sBO))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-home-layout"]],decls:8,vars:1,consts:[[1,"home-main"],[1,"home-header","d-flex"],[1,"home-header__logo","d-flex","align-items-center","justify-content-center"],["src","./assets/icon/logo.png","alt","CDI"],[1,"home-header__navigation","d-flex","align-items-center","justify-content-center"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"header",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3"),t._uU(6),t.qZA()()()(),t._UZ(7,"router-outlet")),2&i&&(t.xp6(6),t.Oqu(n.title))},dependencies:[s.lC],styles:[".home-main[_ngcontent-%COMP%]{padding-bottom:5rem}.home-header[_ngcontent-%COMP%]{color:#fff;height:6rem;left:0;position:fixed;top:0;width:100%;z-index:1000}.home-header__logo[_ngcontent-%COMP%]{background-color:#2d3e50;height:100%;width:30%}@media (max-width: 720px){.home-header__logo[_ngcontent-%COMP%]{width:50%}}.home-header__navigation[_ngcontent-%COMP%]{background-color:#f74149;height:100%;width:70%}@media (max-width: 720px){.home-header__navigation[_ngcontent-%COMP%]{width:50%}}"]})}return e})();var r=l(95),y=l(3519),d=l.n(y);function b(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," El NIT es obligatorio. "),t.qZA())}function Z(e,a){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,b,2,0,"div",21),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.nitControl||null==o.nitControl.errors?null:o.nitControl.errors.required)}}function x(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," El nombre es obligatorio. "),t.qZA())}function T(e,a){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,x,2,0,"div",21),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.companyNameControl||null==o.companyNameControl.errors?null:o.companyNameControl.errors.required)}}function F(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," El tel\xe9fono de contacto es obligatorio. "),t.qZA())}function A(e,a){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,F,2,0,"div",21),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.contactPhoneControl||null==o.contactPhoneControl.errors?null:o.contactPhoneControl.errors.required)}}function N(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," El correo electr\xf3nico es obligatorio. "),t.qZA())}function q(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," Por favor, introduce un correo electr\xf3nico v\xe1lido. "),t.qZA())}function U(e,a){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,N,2,0,"div",21),t.YNc(2,q,2,0,"div",21),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.emailControl||null==o.emailControl.errors?null:o.emailControl.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.emailControl||null==o.emailControl.errors?null:o.emailControl.errors.email)}}function P(e,a){if(1&e&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t._uU(4),t.qZA(),t._uU(5),t.TgZ(6,"span",25),t._uU(7,"Notas:"),t.qZA(),t._uU(8),t.qZA()(),t.TgZ(9,"div",15),t._UZ(10,"input",26),t.qZA()()),2&e){const o=a.$implicit;let n,c,u;t.Q6J("formGroupName",a.index),t.xp6(4),t.hij("(Presi\xf3n ",null==(n=o.get("type"))?null:n.value,") Alcance mantenimiento:"),t.xp6(1),t.hij(" ",null==(c=o.get("scope"))?null:c.value," "),t.xp6(3),t.hij(" ",null==(u=o.get("notes"))?null:u.value," ")}}let O=(()=>{class e{constructor(o,i,n,c){this.activatedRoute=o,this.homeService=i,this.formBuilder=n,this.router=c,this.attemptedSubmit=!1,this.type="",this.title="",this.mainForm=this.formBuilder.group({nit:["1234567",r.kI.required],companyName:["jesus marenco inc",r.kI.required],contactPhone:["77777777777",r.kI.required],email:["jesusmarencodev@gmail.com",[r.kI.required,r.kI.email]],solutionsArray:this.formBuilder.array([])})}ngOnInit(){this.type=this.activatedRoute.snapshot.params.type;const o=this.activatedRoute.snapshot.params.title;console.log(o),this.loadSolutions(this.type),this.homeService.changeTitle(o)}ngOnDestroy(){this.solutions$&&this.solutions$.unsubscribe()}get nitControl(){return this.mainForm.get("nit")}get companyNameControl(){return this.mainForm.get("companyName")}get contactPhoneControl(){return this.mainForm.get("contactPhone")}get emailControl(){return this.mainForm.get("email")}get solutionsArray(){return this.mainForm.get("solutionsArray")}loadSolutions(o){this.solutions$=this.homeService.getSolutionsByType(o).subscribe({next:i=>{this.buildFormArray(i)},error:i=>console.error("Error loading solutions:",i)})}buildFormArray(o){const i=this.mainForm.get("solutionsArray");i.clear(),o.forEach(n=>{i.push(this.formBuilder.group({_id:[n._id],type:[n.type],scope:[n.scope],notes:[n.notes],totalHours:[n.totalHours],unitValue:[n.unitValue],inputValue:[0,r.kI.min(0)]}))})}submitForm(){if(this.mainForm.markAllAsTouched(),this.attemptedSubmit=!0,!this.mainForm.valid)return document.getElementById("formStart")?.scrollIntoView({behavior:"smooth",block:"start"}),void console.log("Form is not valid");const o=this.mainForm.value.solutionsArray.filter(n=>n.inputValue>0).map(n=>({_id:n._id,inputValue:n.inputValue}));o.length?this.homeService.createQuotation({nit:this.mainForm.value.nit,legalName:this.mainForm.value.companyName,phoneNumber:this.mainForm.value.contactPhone,email:this.mainForm.value.email,type:this.type,services:o}).subscribe({next:n=>{d().fire({title:"\xa1\xc9xito!",text:"Cotizaci\xf3n creada con \xe9xito.",icon:"success",confirmButtonText:"Ok"}),this.resetSolutionsArray(),this.attemptedSubmit=!1},error:n=>{d().fire({title:"Error",text:"No se pudo crear la cotizaci\xf3n. Por favor, intenta de nuevo.",icon:"error",confirmButtonText:"Entendido"})}}):d().fire("No selecciono servicios","Por lo menos una cantidad debe ser superior a cero","error")}resetSolutionsArray(){this.mainForm.get("solutionsArray").controls.forEach(i=>{i.patchValue({inputValue:0})})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.gz),t.Y36(h),t.Y36(r.qu),t.Y36(s.F0))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:32,vars:6,consts:[["id","formStart",1,"container","home-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","text-center","p-3"],[1,"col-12","mb-3"],[1,"col-12","col-md-3","pb-1"],["type","number","formControlName","nit","placeholder","NIT","required","","min","0",1,"form-control"],["class","alert alert-danger mt-1 p-2",4,"ngIf"],["type","text","formControlName","companyName","placeholder","Nombre de la compa\xf1\xeda","required","",1,"form-control"],["type","text","formControlName","contactPhone","placeholder","Tel\xe9fono de contacto","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Correo electr\xf3nico","required","",1,"form-control"],["formArrayName","solutionsArray"],[1,"d-none","d-md-block"],[1,"row","header-form","text-white","py-2","mb-2"],[1,"col-md-10","text-center"],[1,"col-md-2","text-center"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","pb-4"],[1,"col-12"],["type","submit",1,"btn","float-end","fw-bold"],[1,"alert","alert-danger","mt-1","p-2"],[4,"ngIf"],[1,"row","mb-2",3,"formGroupName"],[1,"col-md-10"],[1,"text-own-justify"],[1,"fw-bold"],["type","number","formControlName","inputValue","min","0","placeholder","Ingrese valor",1,"form-control"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"SUS DATOS"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",2)(8,"div",5),t._UZ(9,"input",6),t.YNc(10,Z,2,1,"div",7),t.qZA(),t.TgZ(11,"div",5),t._UZ(12,"input",8),t.YNc(13,T,2,1,"div",7),t.qZA(),t.TgZ(14,"div",5),t._UZ(15,"input",9),t.YNc(16,A,2,1,"div",7),t.qZA(),t.TgZ(17,"div",5),t._UZ(18,"input",10),t.YNc(19,U,3,2,"div",7),t.qZA()()()(),t.TgZ(20,"div",11)(21,"div",12)(22,"div",13)(23,"div",14),t._uU(24,"Alcance"),t.qZA(),t.TgZ(25,"div",15),t._uU(26,"Cantidad"),t.qZA()()(),t.YNc(27,P,11,4,"div",16),t.qZA(),t.TgZ(28,"div",17)(29,"div",18)(30,"button",19),t._uU(31,"Enviar"),t.qZA()()()()()),2&i&&(t.xp6(1),t.Q6J("formGroup",n.mainForm),t.xp6(9),t.Q6J("ngIf",(null==n.nitControl?null:n.nitControl.invalid)&&((null==n.nitControl?null:n.nitControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.companyNameControl?null:n.companyNameControl.invalid)&&((null==n.companyNameControl?null:n.companyNameControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.contactPhoneControl?null:n.contactPhoneControl.invalid)&&((null==n.contactPhoneControl?null:n.contactPhoneControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.emailControl?null:n.emailControl.invalid)&&((null==n.emailControl?null:n.emailControl.touched)||n.attemptedSubmit)),t.xp6(8),t.Q6J("ngForOf",n.solutionsArray.controls))},dependencies:[m.sg,m.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.sg,r.u,r.x0,r.CE],styles:[".home-form[_ngcontent-%COMP%]{padding-top:5rem}.home-form[_ngcontent-%COMP%]   .header-form[_ngcontent-%COMP%]{background-color:#2d3e50}.text-own-justify[_ngcontent-%COMP%]{text-align:justify}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return e})();function S(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"h4"),t._uU(4),t.qZA(),t._UZ(5,"img",6),t.TgZ(6,"button",7),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.goForm(c))}),t._uU(7,"ver"),t.qZA()()()()}if(2&e){const o=a.$implicit;t.xp6(4),t.Oqu(o.type)}}const M=[{path:"",component:C,children:[{path:"main",component:g},{path:"valves",component:(()=>{class e{constructor(o){this.router=o,this.valves=[{type:"150-300",title:"150-300"},{type:"600",title:"600"},{type:"900",title:"900"},{type:"1500",title:"1500"}]}goForm(o){this.router.navigate([`/home/form/${o.type}/${o.title}`])}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.F0))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-valves"]],decls:3,vars:1,consts:[[1,"valves","container","pt-5"],[1,"row"],["class","col-md-6 col-sm-12",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[1,"card","mb-2"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/noimage.jpg","alt","no-image"],[1,"btn","mt-3",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,S,8,1,"div",2),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngForOf",n.valves))},dependencies:[m.sg],styles:[".valves[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.valves[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}.valves[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return e})()},{path:"form/:type/:title",component:O},{path:"**",redirectTo:"main"}]}];let w=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[s.Bz.forChild(M),s.Bz]})}return e})(),I=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[m.ez,r.UX,w]})}return e})()}}]);