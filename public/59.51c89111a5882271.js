"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[59],{7059:(W,g,c)=>{c.r(g),c.d(g,{HomeModule:()=>X});var p=c(6814),l=c(7664),t=c(4946),_=c(9862),y=c(9413),C=c(5619);let d=(()=>{class o{constructor(){this.titleSource=new C.X("Start"),this.currentTitle=this.titleSource.asObservable(),this.baseUrl=y.N.baseUrl,this.http=(0,t.f3M)(_.eN),this.router=(0,t.f3M)(l.F0)}getSolutionsByType(e,r,n,s){let m="";return s?m+=`${this.baseUrl}/api/solutions/control/${e}/${r}/${n}/${s}`:m=`${this.baseUrl}/api/solutions/codes/${e}/${r}/${n}`,this.http.get(m)}changeTitle(e){this.titleSource.next(e)}createQuotation(e){return this.http.post(`${this.baseUrl}/api/quotation`,e)}getLabRegistersByType(e){return this.http.get(`${this.baseUrl}/api/laboratory-records/types/${e}`)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),h=(()=>{class o{constructor(e){this.location=e,this.currentColor="#f74149"}changeColor(){this.currentColor="#2D3E50",setTimeout(()=>{this.currentColor="#f74149",this.location.back()},300)}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(p.Ye))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-back"]],decls:3,vars:1,consts:[[1,"mb-3"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle",3,"click"],["fill-rule","evenodd","d","M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t.NdJ("click",function(){return n.changeColor()}),t._UZ(2,"path",2),t.qZA()()),2&r&&(t.xp6(1),t.uIk("fill",n.currentColor))}})}return o})(),b=(()=>{class o{constructor(e){this.homeService=e,this.homeService.changeTitle("Servicios")}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],decls:28,vars:0,consts:[[1,"main","container","pt-5"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/servicios/laboratorio.jpg","alt","lab"],["routerLink","/home/laboratory",1,"btn","mt-3"],["src","./assets/valves/Valves.png","alt","lab"],["routerLink","/home/valves",1,"btn","mt-3"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-back"),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h4"),t._uU(7,"Laboratorio Metrolog\xedco de Calibraci\xf3n"),t.qZA(),t.TgZ(8,"h5"),t._uU(9,"Caracter\xedsticas"),t.qZA(),t.TgZ(10,"p"),t._uU(11," Laboratorio de Calibracion con trazabilidad metrol\xf3gica (en sitio), en magnitudes de presi\xf3n y temperatura para instrumentos industriales "),t.qZA(),t._UZ(12,"img",5),t.TgZ(13,"button",6),t._uU(14,"ver"),t.qZA()()()(),t.TgZ(15,"div",2)(16,"div",3)(17,"div",4)(18,"h4"),t._uU(19,"Especialidad Valvulas"),t.qZA(),t.TgZ(20,"h5"),t._uU(21,"Caracter\xedsticas"),t.qZA(),t.TgZ(22,"p"),t._uU(23," Mantenimiento y pruebas a v\xe1lvulas manuales, de control, de seguridad y alivio, bajo est\xe1ndares internacionales "),t.qZA(),t._UZ(24,"br")(25,"img",7),t.TgZ(26,"button",8),t._uU(27,"ver"),t.qZA()()()()()())},dependencies:[l.rH,h],styles:[".main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}@media (max-width: 720px){.main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return o})(),A=(()=>{class o{constructor(e,r){this.homeService=e,this.cdr=r,this.title="Pendiente"}ngOnInit(){this.homeService.currentTitle.subscribe(e=>{this.title=e,this.cdr.detectChanges()})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(d),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-home-layout"]],decls:8,vars:1,consts:[[1,"home-main"],[1,"home-header","d-flex"],[1,"home-header__logo","d-flex","align-items-center","justify-content-center"],["src","./assets/icon/logo.png","alt","CDI"],[1,"home-header__navigation","d-flex","align-items-center","justify-content-center"],[1,"p-1"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"header",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h5",5),t._uU(6),t.qZA()()()(),t._UZ(7,"router-outlet")),2&r&&(t.xp6(6),t.Oqu(n.title))},dependencies:[l.lC],styles:[".home-main[_ngcontent-%COMP%]{padding-bottom:5rem}.home-header[_ngcontent-%COMP%]{color:#fff;height:6rem;left:0;position:fixed;top:0;width:100%;z-index:1000}.home-header__logo[_ngcontent-%COMP%]{background-color:#2d3e50;height:100%;width:30%}@media (max-width: 720px){.home-header__logo[_ngcontent-%COMP%]{width:50%}}.home-header__navigation[_ngcontent-%COMP%]{background-color:#f74149;height:100%;width:70%}@media (max-width: 720px){.home-header__navigation[_ngcontent-%COMP%]{width:50%}.home-header__navigation[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:12px}}"]})}return o})();var i=c(95),T=c(3519),u=c.n(T);function Z(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El NIT es obligatorio. "),t.qZA())}function N(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,Z,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.nitControl||null==e.nitControl.errors?null:e.nitControl.errors.required)}}function F(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El nombre es obligatorio. "),t.qZA())}function x(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,F,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.companyNameControl||null==e.companyNameControl.errors?null:e.companyNameControl.errors.required)}}function P(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El tel\xe9fono de contacto es obligatorio. "),t.qZA())}function O(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,P,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.contactPhoneControl||null==e.contactPhoneControl.errors?null:e.contactPhoneControl.errors.required)}}function U(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El correo electr\xf3nico es obligatorio. "),t.qZA())}function q(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," Por favor, introduce un correo electr\xf3nico v\xe1lido. "),t.qZA())}function E(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,U,2,0,"div",21),t.YNc(2,q,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.emailControl||null==e.emailControl.errors?null:e.emailControl.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.emailControl||null==e.emailControl.errors?null:e.emailControl.errors.email)}}function S(o,a){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t._uU(4,"Alcance mantenimiento:"),t.qZA(),t._uU(5),t.TgZ(6,"span",25),t._uU(7,"Notas:"),t.qZA(),t._uU(8),t.qZA()(),t.TgZ(9,"div",15),t._UZ(10,"input",26),t.qZA()()),2&o){const e=a.$implicit;let n,s;t.Q6J("formGroupName",a.index),t.xp6(5),t.hij(" ",null==(n=e.get("scope"))?null:n.value," "),t.xp6(3),t.hij(" ",null==(s=e.get("notes"))?null:s.value," ")}}let v=(()=>{class o{constructor(e,r,n,s){this.route=e,this.homeService=r,this.formBuilder=n,this.router=s,this.attemptedSubmit=!1,this.type="",this.group="",this.code="",this.title="",this.control="",this.mainForm=this.formBuilder.group({nit:["1234567",i.kI.required],companyName:["jesus marenco inc",i.kI.required],contactPhone:["77777777777",i.kI.required],email:["jesusmarencodev@gmail.com",[i.kI.required,i.kI.email]],solutionsArray:this.formBuilder.array([])})}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group,this.type=e.type,this.code=e.code,this.control=e.control,this.loadSolutions(this.group,this.type,this.code,this.control),this.homeService.changeTitle("FORMULARIO PARA SOLICITUD DE COTIZAC\xcdON")})}ngOnDestroy(){this.solutions$&&this.solutions$.unsubscribe()}get nitControl(){return this.mainForm.get("nit")}get companyNameControl(){return this.mainForm.get("companyName")}get contactPhoneControl(){return this.mainForm.get("contactPhone")}get emailControl(){return this.mainForm.get("email")}get solutionsArray(){return this.mainForm.get("solutionsArray")}loadSolutions(e,r,n,s){this.solutions$=this.homeService.getSolutionsByType(e,r,n,s).subscribe({next:m=>{this.buildFormArray(m)},error:m=>console.error("Error loading solutions:",m)})}buildFormArray(e){const r=this.mainForm.get("solutionsArray");r.clear(),e.forEach(n=>{r.push(this.formBuilder.group({_id:[n._id],group:[n.group],type:[n.type],code:[n.code],scope:[n.scope],notes:[n.notes],totalHours:[n.totalHours],unitValue:[n.unitValue],inputValue:[0,i.kI.min(0)]}))})}submitForm(){if(this.mainForm.markAllAsTouched(),this.attemptedSubmit=!0,!this.mainForm.valid)return this.scrollToFormStart(),void console.log("Form is not valid");const e=this.getValidSolutions();e.length?this.showDataPolicyAcceptanceDialog(e):this.showNoServicesSelectedError()}scrollToFormStart(){document.getElementById("formStart")?.scrollIntoView({behavior:"smooth",block:"start"})}getValidSolutions(){return this.mainForm.value.solutionsArray.filter(e=>e.inputValue>0).map(e=>({_id:e._id,inputValue:e.inputValue}))}showNoServicesSelectedError(){u().fire("No selecciono servicios","Por lo menos una cantidad debe ser superior a cero","error")}showDataPolicyAcceptanceDialog(e){u().fire({title:"Pol\xedtica de Tratamiento de Datos",html:'Por favor, lee y acepta nuestra <a href="https://coral-app-jgwsi.ondigitalocean.app/home/policy" target="_blank">pol\xedtica de tratamiento de datos</a>: <input type="checkbox" id="chkPoliticaDatos" />',showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",preConfirm:()=>document.getElementById("chkPoliticaDatos").checked}).then(r=>{r.isConfirmed?this.createQuotation(e):this.showDataPolicyWarning()})}createQuotation(e){this.homeService.createQuotation({nit:this.mainForm.value.nit,legalName:this.mainForm.value.companyName,phoneNumber:this.mainForm.value.contactPhone,email:this.mainForm.value.email,type:"valves",services:e}).subscribe({next:n=>{this.showQuotationSuccessMessage(),this.resetSolutionsArray(),this.attemptedSubmit=!1},error:n=>{this.showQuotationErrorMessage()}})}showDataPolicyWarning(){u().fire({title:"Aviso",text:"Debes aceptar la pol\xedtica de tratamiento de datos para continuar.",icon:"warning",confirmButtonText:"Entendido"})}showQuotationSuccessMessage(){u().fire({title:"\xa1\xc9xito!",text:"Cotizaci\xf3n creada con \xe9xito.",icon:"success",confirmButtonText:"Ok"})}showQuotationErrorMessage(){u().fire({title:"Error",text:"No se pudo crear la cotizaci\xf3n. Por favor, intenta de nuevo.",icon:"error",confirmButtonText:"Entendido"})}resetSolutionsArray(){this.mainForm.get("solutionsArray").controls.forEach(r=>{r.patchValue({inputValue:0})})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.gz),t.Y36(d),t.Y36(i.qu),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],decls:33,vars:6,consts:[["id","formStart",1,"container","home-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","text-center","p-3"],[1,"col-12","mb-3"],[1,"col-12","col-md-3","pb-1"],["type","number","formControlName","nit","placeholder","NIT","required","","min","0",1,"form-control"],["class","alert alert-danger mt-1 p-2",4,"ngIf"],["type","text","formControlName","companyName","placeholder","Nombre de la compa\xf1\xeda","required","",1,"form-control"],["type","text","formControlName","contactPhone","placeholder","Tel\xe9fono de contacto","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Correo electr\xf3nico","required","",1,"form-control"],["formArrayName","solutionsArray"],[1,"d-none","d-md-block"],[1,"row","header-form","text-white","py-2","mb-2"],[1,"col-md-10","text-center"],[1,"col-md-2","text-center"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","pb-4"],[1,"col-12"],["type","submit",1,"btn","float-end","fw-bold"],[1,"alert","alert-danger","mt-1","p-2"],[4,"ngIf"],[1,"row","mb-2",3,"formGroupName"],[1,"col-md-10"],[1,"text-own-justify"],[1,"fw-bold"],["type","number","formControlName","inputValue","min","0","placeholder","Ingrese valor",1,"form-control"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-back"),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(3,"div",2)(4,"div",3)(5,"h2"),t._uU(6,"SUS DATOS"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",2)(9,"div",5),t._UZ(10,"input",6),t.YNc(11,N,2,1,"div",7),t.qZA(),t.TgZ(12,"div",5),t._UZ(13,"input",8),t.YNc(14,x,2,1,"div",7),t.qZA(),t.TgZ(15,"div",5),t._UZ(16,"input",9),t.YNc(17,O,2,1,"div",7),t.qZA(),t.TgZ(18,"div",5),t._UZ(19,"input",10),t.YNc(20,E,3,2,"div",7),t.qZA()()()(),t.TgZ(21,"div",11)(22,"div",12)(23,"div",13)(24,"div",14),t._uU(25,"Alcance"),t.qZA(),t.TgZ(26,"div",15),t._uU(27,"Cantidad"),t.qZA()()(),t.YNc(28,S,11,3,"div",16),t.qZA(),t.TgZ(29,"div",17)(30,"div",18)(31,"button",19),t._uU(32,"Enviar"),t.qZA()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",n.mainForm),t.xp6(9),t.Q6J("ngIf",(null==n.nitControl?null:n.nitControl.invalid)&&((null==n.nitControl?null:n.nitControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.companyNameControl?null:n.companyNameControl.invalid)&&((null==n.companyNameControl?null:n.companyNameControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.contactPhoneControl?null:n.contactPhoneControl.invalid)&&((null==n.contactPhoneControl?null:n.contactPhoneControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.emailControl?null:n.emailControl.invalid)&&((null==n.emailControl?null:n.emailControl.touched)||n.attemptedSubmit)),t.xp6(8),t.Q6J("ngForOf",n.solutionsArray.controls))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.qQ,i.sg,i.u,i.x0,i.CE,h],styles:[".home-form[_ngcontent-%COMP%]{padding-top:5rem}.home-form[_ngcontent-%COMP%]   .header-form[_ngcontent-%COMP%]{background-color:#2d3e50}.text-own-justify[_ngcontent-%COMP%]{text-align:justify}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return o})(),M=(()=>{class o{constructor(e,r){this.router=e,this.homeService=r,this.types=[{type:"V\xe1lvulas de Control",title:"MANTENIMIENTO DE VALVULAS DE CONTROL",image:"./assets/valves/1.jpg"},{type:"V\xe1lvulas Manuales",title:"MANTENIMIENTO DE VALVULAS MANUALES",image:"./assets/valves/2.jpg"},{type:"V\xe1lvulas de seguridad - Alivio",title:"MANTENIMIENTO DE VALVULAS DE SEGURIDAD / ALIVIO",image:"./assets/valves/3.jpg"}],this.homeService.changeTitle("Grupos")}goForm(e,r){this.router.navigate(r?[`/home/control/Valves/${e}/${r}`]:[`/home/codes/Valves/${e}`])}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.F0),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-valves"]],decls:36,vars:3,consts:[[1,"valves","container","pt-5"],[1,"row"],[1,"col-md-12","col-sm-12"],[1,"card","mb-2","p-3"],[1,"p-1","text-center"],[1,"card-body","text-center"],[1,"control","me-3","mb-5"],[1,"pb-2"],["src","./assets/images/instrumentacion/CV4.png","alt","Valvulas de control",1,""],[1,"btn","mt-3",3,"click"],[1,"control"],["src","./assets/images/instrumentacion/CV-9.png","alt","Valvulas de control",1,""],[1,"col-md-6","col-sm-12"],[1,"card","mb-2"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/instrumentacion/HV-1.png","alt","Valvulas manuales",1,"me-3","image-section"],["src","./assets/images/instrumentacion/PSV-3.jpeg","alt","Valvulas de seguridad y alivio",1,"me-3","image-section"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-back"),t.TgZ(3,"div",2)(4,"div",3)(5,"h4",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"h6",7),t._uU(10,"Actuador Neum\xe1tico"),t.qZA(),t._UZ(11,"img",8),t.TgZ(12,"button",9),t.NdJ("click",function(){return n.goForm(n.types[0].type,"Actuador Neum\xe1tico")}),t._uU(13," ver "),t.qZA()(),t.TgZ(14,"div",10)(15,"h6",7),t._uU(16,"Actuador\xa0El\xe9ctrico"),t.qZA(),t._UZ(17,"img",11),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.goForm(n.types[0].type,"Actuador\xa0El\xe9ctrico")}),t._uU(19," ver "),t.qZA()()()()(),t.TgZ(20,"div",12)(21,"div",13)(22,"div",14)(23,"h4",7),t._uU(24),t.qZA(),t._UZ(25,"img",15),t.TgZ(26,"button",9),t.NdJ("click",function(){return n.goForm(n.types[1].type)}),t._uU(27,"ver"),t.qZA()()()(),t.TgZ(28,"div",12)(29,"div",13)(30,"div",14)(31,"h4",7),t._uU(32),t.qZA(),t._UZ(33,"img",16),t.TgZ(34,"button",9),t.NdJ("click",function(){return n.goForm("Valvulas de seguridad")}),t._uU(35," ver "),t.qZA()()()()()()),2&r&&(t.xp6(6),t.Oqu(n.types[0].type),t.xp6(18),t.Oqu(n.types[1].type),t.xp6(8),t.Oqu(n.types[2].type))},dependencies:[h],styles:[".valves[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.valves[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{height:50%;flex-direction:column;margin-bottom:1rem;padding-bottom:1rem}}.valves[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{height:250px;width:250px}.valves[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:200px}.valves[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px;width:200px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}.valves[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{align-items:center}.valves[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff;width:150px;margin-bottom:1rem}.image-section[_ngcontent-%COMP%]{height:200px!important;width:250px!important}"]})}return o})();var w=c(9989);function I(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.goForm(s))}),t.TgZ(1,"h4"),t._uU(2),t.qZA()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e)}}let f=(()=>{class o{constructor(e,r,n){this.router=e,this.route=r,this.homeService=n,this.codes=[],this.type="",this.group="",this.control="",this.solutionsService=(0,t.f3M)(w.h)}ngOnInit(){this.route.params.subscribe(e=>{this.group=e.group,this.type=e.type,this.control=e.control,this.getCodes(this.type,this.control);let r=`${this.type}`;this.control&&(r+=` : ${this.control}`),this.homeService.changeTitle(`${r}`)})}getCodes(e,r){this.solutionsService.getCodesByGroupsAndTypes(this.group,e,r).then(n=>{this.codes=[...n]}).catch(n=>{console.error(n)})}goForm(e){const r=this.getTitle(e);this.router.navigate(this.control?["home/controlform/",this.group,this.type,e,r,this.control]:["home/form/",this.group,this.type,e,r])}getTitle(e){const r={"150-300":"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 150-300",600:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 600",900:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 900",1500:"MANTENIMIENTO GENERAL VALVULAS MANUALES DE COMPUERTA, GLOBO, BOLA, TAPON, RETENCION (Cheque) ANSI 1500"};return"Valves"===this.group&&"V\xe1lvulas Manuales"===this.type&&r[e]?r[e]:""}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-codes-page"]],decls:6,vars:1,consts:[[1,"valves","container","pt-5"],[1,"row"],[1,"text-center","mb-4","fw-bold"],["class","code card card-body m-3 d-flex align-items-center justify-content-center",3,"click",4,"ngFor","ngForOf"],[1,"code","card","card-body","m-3","d-flex","align-items-center","justify-content-center",3,"click"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-back"),t.TgZ(3,"h1",2),t._uU(4,"Seleccione su preferencia"),t.qZA(),t.YNc(5,I,3,1,"div",3),t.qZA()()),2&r&&(t.xp6(5),t.Q6J("ngForOf",n.codes))},dependencies:[p.sg,h],styles:[".valves[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#485462}.valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{background:#f74149;color:#fff;cursor:pointer;width:40%}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{width:100%}}"]})}return o})();function D(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El NIT es obligatorio. "),t.qZA())}function V(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,D,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.nitControl||null==e.nitControl.errors?null:e.nitControl.errors.required)}}function B(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El nombre es obligatorio. "),t.qZA())}function Y(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,B,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.companyNameControl||null==e.companyNameControl.errors?null:e.companyNameControl.errors.required)}}function Q(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El tel\xe9fono de contacto es obligatorio. "),t.qZA())}function J(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,Q,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.contactPhoneControl||null==e.contactPhoneControl.errors?null:e.contactPhoneControl.errors.required)}}function j(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," El correo electr\xf3nico es obligatorio. "),t.qZA())}function $(o,a){1&o&&(t.TgZ(0,"div"),t._uU(1," Por favor, introduce un correo electr\xf3nico v\xe1lido. "),t.qZA())}function R(o,a){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,j,2,0,"div",21),t.YNc(2,$,2,0,"div",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.emailControl||null==e.emailControl.errors?null:e.emailControl.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.emailControl||null==e.emailControl.errors?null:e.emailControl.errors.email)}}function G(o,a){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t._uU(4,"Alcance del servicio:"),t.qZA(),t._uU(5),t.qZA()(),t.TgZ(6,"div",15),t._UZ(7,"input",26),t.qZA()()),2&o){const e=a.$implicit;let n;t.Q6J("formGroupName",a.index),t.xp6(5),t.hij(" ",null==(n=e.get("scope"))?null:n.value," ")}}const z=[{path:"",component:A,children:[{path:"main",component:b},{path:"valves",component:M},{path:"codes/:group/:type",component:f},{path:"control/:group/:type/:control",component:f},{path:"form/:group/:type/:code/:title",component:v},{path:"controlform/:group/:type/:code/:title/:control",component:v},{path:"policy",component:(()=>{class o{constructor(e){this.homeService=e}ngOnInit(){this.homeService.changeTitle("Tratamiento de Datos Personales")}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-policy"]],decls:57,vars:0,consts:[[1,"container"],[1,"row"],[1,"col","p-5"],[1,"text-center","pt-4","mb-3"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4," Pol\xedtica de Tratamiento de Datos Personales "),t.qZA(),t.TgZ(5,"p"),t._uU(6," Esta pol\xedtica describe c\xf3mo [nombre de la empresa o aplicaci\xf3n] trata los datos personales de los usuarios y clientes en cumplimiento con la legislaci\xf3n colombiana, especialmente la Ley 1581 de 2012 y sus decretos reglamentarios. "),t.qZA(),t.TgZ(7,"p")(8,"strong"),t._uU(9,"Responsable del Tratamiento de Datos Personales:"),t.qZA(),t._uU(10," [Nombre o raz\xf3n social del responsable del tratamiento] es responsable del tratamiento de los datos personales de los usuarios y clientes. "),t.qZA(),t.TgZ(11,"p")(12,"strong"),t._uU(13,"Finalidad del Tratamiento:"),t.qZA()(),t.TgZ(14,"ul")(15,"li"),t._uU(16," Procesar y gestionar los servicios ofrecidos por [nombre de la empresa o aplicaci\xf3n]. "),t.qZA(),t.TgZ(17,"li"),t._uU(18," Personalizar la experiencia del usuario y mejorar nuestros servicios. "),t.qZA(),t.TgZ(19,"li"),t._uU(20," Enviar comunicaciones comerciales, promociones y ofertas especiales, siempre y cuando el usuario haya dado su consentimiento expreso para recibir este tipo de comunicaciones. "),t.qZA(),t.TgZ(21,"li"),t._uU(22,"Cumplir con obligaciones legales y reglamentarias."),t.qZA()(),t.TgZ(23,"p")(24,"strong"),t._uU(25,"Consentimiento:"),t.qZA(),t._uU(26," Al utilizar nuestros servicios, los usuarios y clientes aceptan esta pol\xedtica de tratamiento de datos personales y autorizan expresamente el tratamiento de sus datos para las finalidades descritas anteriormente. El usuario tiene derecho a retirar su consentimiento en cualquier momento. "),t.qZA(),t.TgZ(27,"p")(28,"strong"),t._uU(29,"Derechos de los Titulares de Datos Personales:"),t.qZA()(),t.TgZ(30,"ul")(31,"li"),t._uU(32," Derecho de acceso: Solicitar informaci\xf3n sobre los datos personales que tenemos almacenados. "),t.qZA(),t.TgZ(33,"li"),t._uU(34," Derecho de rectificaci\xf3n: Solicitar la correcci\xf3n de datos personales inexactos o incompletos. "),t.qZA(),t.TgZ(35,"li"),t._uU(36," Derecho de supresi\xf3n: Solicitar la eliminaci\xf3n de datos personales cuando ya no sean necesarios para los fines para los cuales fueron recopilados. "),t.qZA(),t.TgZ(37,"li"),t._uU(38," Derecho de revocar el consentimiento: Retirar el consentimiento otorgado para el tratamiento de datos personales. "),t.qZA(),t.TgZ(39,"li"),t._uU(40," Derecho de oposici\xf3n: Oponerse al tratamiento de datos personales en determinadas circunstancias. "),t.qZA(),t.TgZ(41,"li"),t._uU(42," Derecho de portabilidad: Solicitar la transferencia de sus datos personales a otro responsable del tratamiento en determinadas circunstancias. "),t.qZA()(),t.TgZ(43,"p")(44,"strong"),t._uU(45,"Medidas de Seguridad:"),t.qZA(),t._uU(46," [Nombre de la empresa o aplicaci\xf3n] implementa medidas t\xe9cnicas, administrativas y f\xedsicas para proteger los datos personales contra el acceso no autorizado, la p\xe9rdida, la alteraci\xf3n o la divulgaci\xf3n. "),t.qZA(),t.TgZ(47,"p")(48,"strong"),t._uU(49,"Transferencia de Datos:"),t.qZA(),t._uU(50," [Nombre de la empresa o aplicaci\xf3n] puede transferir datos personales a terceros proveedores de servicios, siempre y cuando exista un contrato que garantice la protecci\xf3n de los datos personales transferidos. "),t.qZA(),t.TgZ(51,"p")(52,"strong"),t._uU(53,"Modificaciones a la Pol\xedtica:"),t.qZA(),t._uU(54," Esta pol\xedtica puede ser modificada en cualquier momento para reflejar cambios en nuestras pr\xe1cticas de tratamiento de datos personales. Se recomienda revisar peri\xf3dicamente esta pol\xedtica para estar informado sobre c\xf3mo tratamos los datos personales. "),t.qZA(),t.TgZ(55,"p"),t._uU(56," Al utilizar nuestros servicios, usted acepta y consiente expresamente el tratamiento de sus datos personales de acuerdo con esta pol\xedtica. "),t.qZA()()()())},styles:[".valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{background:#f74149;color:#fff;cursor:pointer;width:40%}@media (max-width: 720px){.valves[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{width:100%}}"]})}return o})()},{path:"laboratory",component:(()=>{class o{constructor(e,r){this.router=e,this.homeService=r,this.homeService.changeTitle("Grupos")}goForm(e){this.router.navigate([`/home/laboratory/${e}`])}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.F0),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-laboratory"]],decls:19,vars:0,consts:[[1,"laboratory","container","pt-5"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"card","mb-1"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-cente"],["src","./assets/images/servicios/laboratorio.jpg","alt","lab"],["routerLink","/home/laboratory",1,"btn","mt-3",3,"click"],["src","./assets/images/servicios/Temperatura-4.jpg","alt","lab"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-back"),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h4"),t._uU(7,"Presion"),t.qZA(),t._UZ(8,"img",5),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.goForm("presion")}),t._uU(10," ver "),t.qZA()()()(),t.TgZ(11,"div",2)(12,"div",3)(13,"div",4)(14,"h4"),t._uU(15,"Temperatura"),t.qZA(),t._UZ(16,"img",7),t.TgZ(17,"button",6),t.NdJ("click",function(){return n.goForm("temperatura")}),t._uU(18," ver "),t.qZA()()()()()())},dependencies:[l.rH,h],styles:[".laboratory[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60%;padding-top:1rem}.laboratory[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;border-radius:10px;box-shadow:8px 5px 5px #000000a2}@media (max-width: 992px){.laboratory[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}.laboratory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return o})()},{path:"laboratory/:type",component:(()=>{class o{constructor(e,r,n,s){this.route=e,this.homeService=r,this.formBuilder=n,this.router=s,this.attemptedSubmit=!1,this.type="",this.title="",this.mainForm=this.formBuilder.group({nit:["1234567",i.kI.required],companyName:["jesus marenco inc",i.kI.required],contactPhone:["77777777777",i.kI.required],email:["jesusmarencodev@gmail.com",[i.kI.required,i.kI.email]],solutionsArray:this.formBuilder.array([])})}ngOnInit(){this.route.params.subscribe(e=>{this.type=e.type,this.loadRegisters(this.type),this.homeService.changeTitle("FORMULARIO PARA SOLICITUD DE COTIZAC\xcdON")})}ngOnDestroy(){this.registersLab$&&this.registersLab$.unsubscribe()}get nitControl(){return this.mainForm.get("nit")}get companyNameControl(){return this.mainForm.get("companyName")}get contactPhoneControl(){return this.mainForm.get("contactPhone")}get emailControl(){return this.mainForm.get("email")}get solutionsArray(){return this.mainForm.get("solutionsArray")}loadRegisters(e){this.registersLab$=this.homeService.getLabRegistersByType(e).subscribe({next:r=>{this.buildFormArray(r)},error:r=>console.error("Error loading registers:",r)})}buildFormArray(e){const r=this.mainForm.get("solutionsArray");r.clear(),e.forEach(n=>{r.push(this.formBuilder.group({_id:[n._id],type:[n.type],scope:[n.scope],totalHours:[n.totalHours],unitValue:[n.unitValue],inputValue:[0,i.kI.min(0)]}))})}submitForm(){if(this.mainForm.markAllAsTouched(),this.attemptedSubmit=!0,!this.mainForm.valid)return this.scrollToFormStart(),void console.log("Form is not valid");const e=this.getValidSolutions();e.length?this.showDataPolicyAcceptanceDialog(e):this.showNoServicesSelectedError()}scrollToFormStart(){document.getElementById("formStart")?.scrollIntoView({behavior:"smooth",block:"start"})}getValidSolutions(){return this.mainForm.value.solutionsArray.filter(e=>e.inputValue>0).map(e=>({_id:e._id,inputValue:e.inputValue}))}showNoServicesSelectedError(){u().fire("No selecciono servicios","Por lo menos una cantidad debe ser superior a cero","error")}showDataPolicyAcceptanceDialog(e){u().fire({title:"Pol\xedtica de Tratamiento de Datos",html:'Por favor, lee y acepta nuestra <a href="https://coral-app-jgwsi.ondigitalocean.app/home/policy" target="_blank">pol\xedtica de tratamiento de datos</a>: <input type="checkbox" id="chkPoliticaDatos" />',showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",preConfirm:()=>document.getElementById("chkPoliticaDatos").checked}).then(r=>{r.isConfirmed?this.createQuotation(e):this.showDataPolicyWarning()})}createQuotation(e){this.homeService.createQuotation({nit:this.mainForm.value.nit,legalName:this.mainForm.value.companyName,phoneNumber:this.mainForm.value.contactPhone,email:this.mainForm.value.email,type:"laboratory",services:e}).subscribe({next:n=>{this.showQuotationSuccessMessage(),this.resetSolutionsArray(),this.attemptedSubmit=!1},error:n=>{this.showQuotationErrorMessage()}})}showDataPolicyWarning(){u().fire({title:"Aviso",text:"Debes aceptar la pol\xedtica de tratamiento de datos para continuar.",icon:"warning",confirmButtonText:"Entendido"})}showQuotationSuccessMessage(){u().fire({title:"\xa1\xc9xito!",text:"Cotizaci\xf3n creada con \xe9xito.",icon:"success",confirmButtonText:"Ok"})}showQuotationErrorMessage(){u().fire({title:"Error",text:"No se pudo crear la cotizaci\xf3n. Por favor, intenta de nuevo.",icon:"error",confirmButtonText:"Entendido"})}resetSolutionsArray(){this.mainForm.get("solutionsArray").controls.forEach(r=>{r.patchValue({inputValue:0})})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.gz),t.Y36(d),t.Y36(i.qu),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-laboratory"]],decls:33,vars:6,consts:[["id","formStart",1,"container","home-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","text-center","p-3"],[1,"col-12","mb-3"],[1,"col-12","col-md-3","pb-1"],["type","number","formControlName","nit","placeholder","NIT","required","","min","0",1,"form-control"],["class","alert alert-danger mt-1 p-2",4,"ngIf"],["type","text","formControlName","companyName","placeholder","Nombre de la compa\xf1\xeda","required","",1,"form-control"],["type","text","formControlName","contactPhone","placeholder","Tel\xe9fono de contacto","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Correo electr\xf3nico","required","",1,"form-control"],["formArrayName","solutionsArray"],[1,"d-none","d-md-block"],[1,"row","header-form","text-white","py-2","mb-2"],[1,"col-md-10","text-center"],[1,"col-md-2","text-center"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","pb-4"],[1,"col-12"],["type","submit",1,"btn","float-end","fw-bold"],[1,"alert","alert-danger","mt-1","p-2"],[4,"ngIf"],[1,"row","mb-2",3,"formGroupName"],[1,"col-md-10"],[1,"text-own-justify"],[1,"fw-bold"],["type","number","formControlName","inputValue","min","0","placeholder","Ingrese valor",1,"form-control"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-back"),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(3,"div",2)(4,"div",3)(5,"h2"),t._uU(6,"SUS DATOS"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",2)(9,"div",5),t._UZ(10,"input",6),t.YNc(11,V,2,1,"div",7),t.qZA(),t.TgZ(12,"div",5),t._UZ(13,"input",8),t.YNc(14,Y,2,1,"div",7),t.qZA(),t.TgZ(15,"div",5),t._UZ(16,"input",9),t.YNc(17,J,2,1,"div",7),t.qZA(),t.TgZ(18,"div",5),t._UZ(19,"input",10),t.YNc(20,R,3,2,"div",7),t.qZA()()()(),t.TgZ(21,"div",11)(22,"div",12)(23,"div",13)(24,"div",14),t._uU(25,"Alcance"),t.qZA(),t.TgZ(26,"div",15),t._uU(27,"Cantidad"),t.qZA()()(),t.YNc(28,G,8,2,"div",16),t.qZA(),t.TgZ(29,"div",17)(30,"div",18)(31,"button",19),t._uU(32,"Enviar"),t.qZA()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",n.mainForm),t.xp6(9),t.Q6J("ngIf",(null==n.nitControl?null:n.nitControl.invalid)&&((null==n.nitControl?null:n.nitControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.companyNameControl?null:n.companyNameControl.invalid)&&((null==n.companyNameControl?null:n.companyNameControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.contactPhoneControl?null:n.contactPhoneControl.invalid)&&((null==n.contactPhoneControl?null:n.contactPhoneControl.touched)||n.attemptedSubmit)),t.xp6(3),t.Q6J("ngIf",(null==n.emailControl?null:n.emailControl.invalid)&&((null==n.emailControl?null:n.emailControl.touched)||n.attemptedSubmit)),t.xp6(8),t.Q6J("ngForOf",n.solutionsArray.controls))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.qQ,i.sg,i.u,i.x0,i.CE,h],styles:[".home-form[_ngcontent-%COMP%]{padding-top:5rem}.home-form[_ngcontent-%COMP%]   .header-form[_ngcontent-%COMP%]{background-color:#2d3e50}.text-own-justify[_ngcontent-%COMP%]{text-align:justify}button[_ngcontent-%COMP%]{background:#f74149;color:#fff}"]})}return o})()},{path:"**",redirectTo:"main"}]}];let H=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(z),l.Bz]})}return o})(),X=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.ez,i.UX,H]})}return o})()}}]);