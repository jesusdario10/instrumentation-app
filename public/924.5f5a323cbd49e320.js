"use strict";(self.webpackChunkcosici=self.webpackChunkcosici||[]).push([[924],{8924:(v,f,i)=>{i.r(f),i.d(f,{UsersModule:()=>y});var l=i(6814),a=i(7664),t=i(4946),u=i(9862),b=i(9413);let m=(()=>{class r{constructor(){this.baseUrl=b.N.baseUrl,this.http=(0,t.f3M)(u.eN)}getUsers(){const e=`${this.baseUrl}/api/auth`,o=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${o}`);return this.http.get(e,{headers:s})}getUserById(e){const o=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${o}`);return this.http.get(`${this.baseUrl}/api/auth/${e}`,{headers:s})}addUser(e){const o=localStorage.getItem("token"),s=(new u.WM).set("Authorization",`Bearer ${o}`);return this.http.post(`${this.baseUrl}/api/auth`,e,{headers:s})}updateUser(e,o){const s=`${this.baseUrl}/api/auth/${e}`,c=localStorage.getItem("token"),g=(new u.WM).set("Authorization",`Bearer ${c}`);return this.http.patch(s,o,{headers:g})}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function h(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"strong"),t._uU(4,"Nombre:"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"div",7)(7,"strong"),t._uU(8,"Email:"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.navigateToUserDetail(c._id))}),t.TgZ(12,"i"),t._uU(13,"Edit"),t.qZA()()()()()}if(2&r){const e=p.$implicit;t.xp6(5),t.hij(" ",e.name,""),t.xp6(4),t.hij(" ",e.email,"")}}let C=(()=>{class r{constructor(e,o){this.usersService=e,this.router=o,this.users=[]}ngOnInit(){this.loadUsers()}loadUsers(){this.usersService.getUsers().subscribe({next:e=>{this.users=e},error:e=>{console.error("There was an error!",e)}})}navigateToUserDetail(e){this.router.navigate(["/dashboard/users",e])}createUser(){this.router.navigate(["/dashboard/users/add"])}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(m),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-users"]],decls:8,vars:1,consts:[[1,"users-list-container"],[1,"text-center"],[1,"text-center","title"],[1,"edit-btn","create-btn",3,"click"],["class","user-card",4,"ngFor","ngForOf"],[1,"user-card"],[1,"user-info"],[1,"user-detail"],[1,"user-detail","user-actions"],[1,"edit-btn",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Gestion de usuarios"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return s.createUser()}),t.TgZ(5,"i"),t._uU(6,"Create Users"),t.qZA()()(),t.YNc(7,h,14,2,"div",4),t.qZA()),2&o&&(t.xp6(7),t.Q6J("ngForOf",s.users))},dependencies:[l.sg],styles:[".users-list-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#1e64af;margin-bottom:1rem}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{background-color:#f8f9fa;box-shadow:0 4px 8px #0000001a;border-radius:10px;overflow:hidden;width:100%;display:flex;flex-direction:column;justify-content:space-between;margin-bottom:1rem}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;padding:1rem;justify-content:space-between}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]{width:45%}.users-list-container[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-actions[_ngcontent-%COMP%]{width:10%}.edit-btn[_ngcontent-%COMP%]{width:70px;display:inline;background:linear-gradient(to right,#4a00e0,#8e2de2);color:#f8f9fa;border:none;cursor:pointer;padding:10px;border-radius:5px;transition:background-color .3s}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#1e64af}.create-btn[_ngcontent-%COMP%]{width:165px;margin-bottom:1.5rem}"]})}return r})();var n=i(95),_=i(3519),d=i.n(_);let M=(()=>{class r{constructor(e,o){this.route=e,this.router=o,this.fb=(0,t.f3M)(n.qu),this.userService=(0,t.f3M)(m),this.userId="",this.myForm=this.fb.group({email:["",[n.kI.required,n.kI.email]],name:["",[n.kI.required,n.kI.minLength(3)]]})}ngOnInit(){this.route.params.subscribe(e=>{this.userId=e.id,this.loadUserDetail()})}loadUserDetail(){this.userService.getUserById(this.userId).subscribe(e=>{this.myForm.patchValue({email:e.email,name:e.name})})}onSubmit(){this.myForm.valid&&this.userService.updateUser(this.userId,this.myForm.value).subscribe({next:e=>{d().fire({title:"Updated",icon:"success"})},error:e=>{d().fire("Error",e,"error")}})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(a.gz),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-user-detail"]],decls:12,vars:2,consts:[[1,"user-detail-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Email"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",5),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"button",7),t._uU(11," Guardar Cambios "),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",s.myForm),t.xp6(9),t.Q6J("disabled",!s.myForm.valid))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".user-detail-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px;border:1px solid #ced4da;border-radius:8px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#495057}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;font-size:16px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;font-size:18px;border-radius:5px;border:none;cursor:pointer;background-color:#007bff;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc}"]})}return r})();function x(r,p){1&r&&(t.TgZ(0,"span"),t._uU(1,"\u{1f648}"),t.qZA())}function P(r,p){1&r&&(t.TgZ(0,"span"),t._uU(1,"\u{1f441}\ufe0f"),t.qZA())}const U=[{path:"",component:C},{path:"add",component:(()=>{class r{constructor(e,o){this.route=e,this.router=o,this.fb=(0,t.f3M)(n.qu),this.userService=(0,t.f3M)(m),this.showPassword=!1,this.userId="",this.myForm=this.fb.group({email:["",[n.kI.required,n.kI.email]],name:["",[n.kI.required,n.kI.minLength(3)]],password:["",[n.kI.required,n.kI.minLength(6)]]})}ngOnInit(){}onSubmit(){this.myForm.valid&&this.userService.addUser(this.myForm.value).subscribe({next:e=>{d().fire({title:"Created",icon:"success"}),this.router.navigate(["/dashboard/users"])},error:e=>{d().fire("Error",e,"error")}})}toggleShowPassword(){this.showPassword=!this.showPassword}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(a.gz),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-users"]],decls:20,vars:5,consts:[[1,"user-detail-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","password"],[1,"input-group"],["type","password","id","password","formControlName","password",1,"form-control",3,"type"],["type","button",1,"btn","btn-secondary",3,"click"],[4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Email"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",5),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",2)(11,"label",7),t._uU(12,"Password"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"input",9),t.TgZ(15,"button",10),t.NdJ("click",function(){return s.toggleShowPassword()}),t.YNc(16,x,2,0,"span",11),t.YNc(17,P,2,0,"span",11),t.qZA()()(),t.TgZ(18,"button",12),t._uU(19," Crear Usuario "),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",s.myForm),t.xp6(13),t.Q6J("type",s.showPassword?"text":"password"),t.xp6(2),t.Q6J("ngIf",s.showPassword),t.xp6(1),t.Q6J("ngIf",!s.showPassword),t.xp6(1),t.Q6J("disabled",!s.myForm.valid))},dependencies:[l.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".user-detail-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px;border:1px solid #ced4da;border-radius:8px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#495057}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:4px;font-size:16px}.user-detail-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;font-size:18px;border-radius:5px;border:none;cursor:pointer;background-color:#007bff;color:#fff}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.user-detail-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:-20px}"]})}return r})()},{path:":id",component:M}];let O=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(U),a.Bz]})}return r})(),y=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[l.ez,O,u.JF,n.UX]})}return r})()}}]);